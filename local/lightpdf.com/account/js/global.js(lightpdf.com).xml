"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],s=!0,n=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(n)throw o}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function asyncGeneratorStep(t,e,i,s,n,o,a){try{var r=t[o](a),l=r.value}catch(t){return void i(t)}r.done?e(l):Promise.resolve(l).then(s,n)}function _asyncToGenerator(r){return function(){var t=this,a=arguments;return new Promise(function(e,i){var s=r.apply(t,a);function n(t){asyncGeneratorStep(s,e,i,n,o,"next",t)}function o(t){asyncGeneratorStep(s,e,i,n,o,"throw",t)}n(void 0)})}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(v){var t=location.host.includes("apowersoft"),e=t||["airmore","showmore.com","videograbber.net","screenshot.net","lightpdf.com","lightmake.com","reccloud"].some(function(t){return location.hostname.includes(t)}),i=["lightmake","lightmv"].some(function(t){return location.hostname.includes(t)}),s=["myaccount"].some(function(t){return location.hostname.includes(t)}),n=window.apowerConfig||{},o=window.apowerTrans=window.apowerTrans||{};function a(t){if("object"===_typeof(t))for(var e in t)o[e]=o[e]||t[e]}for(var r=Object.keys(window),l=0,c=r.length;l<c;l++){var h=r[l];/^trans(?:\d+|_\w+)?$/.test(h)&&a(window[h])}var d=document.documentElement.lang||v.store.get("lang")||"en";e?(document.documentElement.lang=d,v.store.set("lang",d)):d=o.lang||d;var g=window.apower=window.apower||{isApowerDomain:t,isOurDomain:e,isLightMV:i,isAccount:s,lang:d,translations:o,extendTranslation:a,pageType:n.pageType||"",productId:n.productId||"",productType:n.productType||"1",hash:"406b24353675aac594d2a7c5f6cc31fe",agents:{},isDev:location.hostname.endsWith(".test"),isPro:location.hostname.includes("lightpdf.com"),tr:function(t){var e,i=g.translations;g.lang;t.includes("@@")&&(e=t.slice(0,t.indexOf("@@")),t=t.slice(t.indexOf("@@")+2));for(var s=i[t]||e||t,n=arguments.length,o=new Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return 0<o.length&&(s=s.format(o)),s},trans:function(t){return t=(t=t.replace(/\{([^\{\}]*?)@{1,2}(\w*)(,.+?)?\}/g,function(t,e,i,s){return g._trans_by_matches(e,i,s)})).replace(/>\s*([^<>]*?)@@(\w*)(,.+?)?\s*</g,function(t,e,i,s){return">"+g._trans_by_matches(e,i,s)+"<"})},_trans_by_matches:function(t,e,i){var s=i||"",n=String(g.tr(t+"@@"+e));if(s){s=s.slice(1).split(",");for(var o=0;o<s.length;o++){var a=s[o].trim();a.startsWith("@")&&(a=String(g.tr(a.slice(1)))),s[o]=a}n=n.format(s);for(var r=0;r<s.length;r++){var l=s[r].trim();n.includes(l)||(n+="_"+l)}}return n},getLightmvApiBaseUrl:function(){return"https://apilightmv.aoscdn.com"},getLightmvMobileDomain:function(){return"zh"===this.lang?"https://myaccountm.lightmv.cn":"https://myaccountm.lightmv.com"},getRegionPath:function(t){if(location.hostname.includes("reccloud.cn"))return"";var e=this.getShortRegion(t);return"en"===e?"":"/"+e},getShortRegion:function(t){return{cs:"cz",da:"dk",ja:"jp",sv:"se",el:"gr"}[t=t||g.lang]||t},getApowersoftDomain:function(t){if(this.isDev)return"zh"===t?"http://apowersoftcn.test":"http://apowersoft.test";t=t||g.lang;var e={pt:".com.br",en:".com",zh:".cn",tr:"-tr.com",no:"-no.com",cs:".cz",da:".dk",ja:".jp",sv:".se",el:".gr",ar:".ae"},i="fr de it nl es fi pl tw hu kr".split(" ");return e[t]||i.includes(t)||(t="en"),"https://www.apowersoft"+(e[t]||"."+t)},getDomain:function(t){if(this.isDev)return"zh"===t?"http://apowersoftcn.test":"http://apowersoft.test";t=t||g.lang;var e={pt:".com.br",en:".com",zh:".cn",tr:"-tr.com",no:"-no.com",cs:".cz",da:".dk",ja:".jp",sv:".se",el:".gr",ar:".ae"},i="fr de it nl es fi pl tw hu kr".split(" ");e[t]||i.includes(t)||(t="en");var s=e[t]||"."+t,n=window.location.hostname.includes("myaccount.lightmv")?"https://lightmv.com/"+t:"https://www.apowersoft"+s;return n},getCDNDomain:function(){return this.isDev?"http://apowersoft.test/frontend":location.host.startsWith("dev")?"https://dev048.apowersoft.com":"https://cdn.aoscdn.com"},getLightMvDomain:function(){return"zh"===this.lang?"https://www.lightmv.cn":"https://lightmv.com/"+(g.lang||"en")},getSupportDomain:function(){return"https://support.aoscdn.com"},getAPIDomain:function(){return this.isDev?"http://api.apowersoft.test":"zh"===g.lang?"https://api.apowersoft.cn":"https://api.apowersoft.com"},getWPPath:function(t){return g.isApowerDomain?"":g.getRegionPath(t)+"/wp"},getDownloadDomain:function(t){return"zh"!==(t=t||g.lang)?"https://download.apowersoft.com":"https://download.apowersoft.cn"},getMyAccountDomain:function(){return this.isDev?"http://dev050.apowersoft.com":"zh"===g.lang||location.host.endsWith("cn")?"https://myaccount.apowersoft.cn":"https://myaccount.apowersoft.com"},getMyAccountMobileDomain:function(){return this.isDev?"http://myaccountm.apowersoft.test":"zh"===g.lang||location.host.endsWith("cn")?"https://myaccountm.apowersoft.cn":"https://myaccountm.apowersoft.com"},randomString:function(t){t=t||32;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnoprstuvwxyz123456789",i=e.length,s="",n=0;n<t;n++)s+=e.charAt(Math.floor(Math.random()*i));return s}},u={uploadFiles:function(l,c,h){var d=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i,s,n,o,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h&&(c=c.bind(h)),(l=d.filterFiles(l)).length){t.next=5;break}return c&&c([]),t.abrupt("return",[]);case 5:return e=!1,v.msg.info(g.tr("Uploading {0}...@@uploading_file").format('"'+l[0].name+'"'),"0%",{buttons:["cancel"],handler:function(){e=!0}}),t.next=9,d.getAttachmentParams(l);case 9:if(!(i=t.sent)||e)return c&&c(null),t.abrupt("return",null);t.next=13;break;case 13:s=[],n=_createForOfIteratorHelper(l),t.prev=15,n.s();case 17:if((o=n.n()).done){t.next=30;break}return a=o.value,t.next=21,d.uploadEachFile(a,i(s.length));case 21:if(!(r=t.sent)){t.next=26;break}s.push({url:r,name:a.name}),t.next=28;break;case 26:return c&&c(null),t.abrupt("return",null);case 28:t.next=17;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(15),n.e(t.t0);case 35:return t.prev=35,n.f(),t.finish(35);case 38:return c&&c(s),t.abrupt("return",s);case 40:case"end":return t.stop()}},t,null,[[15,32,35,38]])}))()},uploadFile:function(s,n,o){var a=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o&&(n=n.bind(o)),t.next=3,a.uploadFiles([s]);case 3:return e=t.sent,i=e?e[0]:null,n&&n(i),t.abrupt("return",i);case 7:case"end":return t.stop()}},t)}))()},filterFiles:function(t){var e;return!(t=_toConsumableArray(t).filter(function(t){return e=t.name.replace("/(w+)./",""),!t.name.match(/\.(html|htm|css|php|js)/i)})).length&&e&&v.msg.alert(g.tr("cant_upload_ext_type").format("<b>"+e+"</b>")),t},getAttachmentParams:function(a){var r=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i,s,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.map(function(t){return t.name}),i={type:"attachment",files:JSON.stringify(e)},t.next=4,r.getParams(i);case 4:if(s=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return n=s.data.storage,o={callbackUrl:n.callback_url.callbackUrl,callbackBody:n.callback_url.callbackBody},t.abrupt("return",function(t){return{type:n.type,callback_url:JSON.stringify(o),object:n.objects[t],security_token:n.security_token}});case 10:case"end":return t.stop()}},t)}))()},getParams:function(n){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.req.post("https://file.aoscdn.com/api/authorize",n);case 2:if(e=t.sent,i=e.ok,s=e.data,i)return t.abrupt("return",s);t.next=9;break;case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}},t)}))()},uploadEachFile:function(c,h){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i,s,n,o,a,r,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i in(e=new FormData).append("file",c),h)e.append(i,h[i]);return s=function(t){var e=Math.round(t.loaded/t.total*100);o(e)},(o=function(t){v.msg.info(g.tr("Uploading {0}...@@uploading_file").format('"'+c.name+'"'),t+"%",{buttons:["cancel"],handler:function(){n&&n()}})})(0),t.next=8,v.req.post("https://storage.aoscdn.com/api/files",e,{onuploadprogress:s,getAbort:function(t){n=t}});case 8:if(a=t.sent,r=a.ok,l=a.data,v.msg.hide(),r&&l)return t.abrupt("return",l.data.url);t.next=16;break;case 16:return v.msg.error(g.tr('Failed to upload "{0}"!@@failed_to_upload',c.name)),t.abrupt("return",null);case 18:case"end":return t.stop()}},t)}))()},scriptLoadPromise:null,MAX_AVATAR_SIZE:5242880,uploadAvatar:function(p,f,t){var m=this;return t&&(f=f.bind(t)),p.size>this.MAX_AVATAR_SIZE?(v.msg.alert(g.tr("cant_upload_files_larger").format(v.formatSize(this.MAX_AVATAR_SIZE))),f&&f(null),null):new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var i,s,n,o,a,r,l,c,h,d,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.OSS){t.next=14;break}if(t.prev=1,m.scriptLoadPromise)return t.next=5,m.scriptLoadPromise;t.next=7;break;case 5:t.next=9;break;case 7:return t.next=9,m.scriptLoadPromise=v.loadScript("https://gosspublic.alicdn.com/aliyun-oss-sdk.min.js");case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",null);case 14:return i=g.user?g.user.getId():"",s=g.user?g.user.getToken():"",n={type:"avatar",file:p.name,user_id:i,identity_token:s},t.next=19,m.getParams(n);case 19:if(o=t.sent){t.next=22;break}return t.abrupt("return",null);case 22:a=o.data.ali,r=a.callback_url.callbackUrl,l=a.callback_url.callbackBody,c=new OSS.Wrapper({accessKeyId:a.access_id,accessKeySecret:a.access_secret,bucket:a.bucket,secure:!0,stsToken:a.security_token,endpoint:a.endpoint,region:a.region}),h=a.objects[0],d="&x:uid="+i+"&x:utoken="+encodeURI(s),u={url:r,body:l+d},c.multipartUpload(h,p,{cancelFlag:!0,callback:u}).then(function(t){f&&f(t.data.data.url),e(t.data.data.url)},function(t){f&&f(null),e(null)});case 30:case"end":return t.stop()}},t,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}())}};g.uploadFiles=u.uploadFiles.bind(u),g.uploadFile=u.uploadFile.bind(u),g.uploadAvatar=u.uploadAvatar.bind(u)}(jQuery),function(w){var h=apower.tr;w.registerDirective("render-on",{value:"",bind:function(){("mobile"===this.value&&w(window).width()<=768||"pc"===this.value&&768<w(window).width())&&this.layout()},layout:function(){this.el.replaceWith(w(this.el[0].textContent))}}),w.registerDirective("tip",{value:"",align:"t",gap:"5",tipClass:"",bind:function(){this.el.on("mouseenter",this.onMouseEnter,this)},unbind:function(){var t=this;this.el.off("mouseenter",this.onMouseEnter,this),this.el.off("mouseleave",this.onMouseLeave,this),this.layer&&this.layer.fadeOut(200,function(){t.layer.remove()})},update:function(t){this.value=t},onMouseEnter:function(){this.value&&768<=w(window).width()&&(this.showTip(),w.onceAllLeave([this.el,this.layer],200,this.onMouseLeave,this))},showTip:function(){w(".ap-tip").remove(),this.layer=w('<div class="ap-tip '+this.tipClass+'"><div class="ap-trangle"></div><div class="ap-tip-text">'+this.value+"</div></div>").appendTo("body"),this.layer.show(),this.layer.alignTo(this.el,this.align,this.gap),this.trigger("show",this.layer)},onMouseLeave:function(){this.hideTip()},hideTip:function(){this.el.off("mouseleave",this.onMouseLeave,this),this.layer&&this.layer.fadeOut(300,function(){this.destroyed&&this.layer.remove(),this.trigger("hide",this.layer)}.bind(this))},setValue:function(t){this.value=t,this.layer&&(this.layer.find(".ap-tip-text").html(t),this.layer.alignTo(this.el,this.align,this.gap))}}),w.registerDirective("tabs",{value:"",btns:null,tabs:null,bind:function(){var t;this.btns=this.el.children(),this.value?(t=(this.value.startsWith(".")||this.value.startsWith("#")?"":".")+this.value,this.tabs=this.el.findNearestBehind(t).children()):this.tabs=this.el.next().children(),this.btns.$on("click",this.onClickBtn,this);var e=this.btns.filter(".active").index();0<=e&&this.tabs.eq(e).addClass("active")},onClickBtn:function(t){var e=w(t.currentTarget),i=this.tabs.eq(e.index());e.addClass("active").siblings().removeClass("active"),i.addClass("active").siblings().removeClass("active"),this.trigger("change",i)}}),w.registerDirective("loading",{loadingEl:null,update:function(t){var e=this;t?(this.loadingEl=this.loadingEl||w('<div class="loading"><div><div></div></div></div>'),this.loadingEl.appendTo(this.el),"static"===this.el.css("position")&&this.el.css("position","relative"),w.nextTick(function(){e.el.height()<80&&(e.loadingEl.addClass("loading-small"),e.el.css("font-size","0"))})):this.loadingEl&&(this.loadingEl.fadeOut(200,function(){e.loadingEl.hide()}),this.el.css("font-size",""))}}),w.registerMixin("loading",{showLoading:function(){var t=this;this.loadingEl=this.loadingEl||w('<div class="loading"><div><div></div></div></div>').appendTo(this.el),w.nextTick(function(){t.loadingEl.show(),t.el.height()<80?(t.loadingEl.addClass("loading-small"),t.el.css("font-size","0")):t.loadingEl.removeClass("loading-small")})},hideLoading:function(){var t=this;this.loadingEl&&(this.loadingEl.fadeOut(200,function(){t.loadingEl.hide()}),this.el.css("font-size",""))}}),w.registerComponent("icon",{SYMBOLS:{},template:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" :class="\'icon-\' + (type || \'unknown\')"></svg>',type:"",onReady:function(){this.watch("type",this.onTypeChange,!0)},onTypeChange:function(t){this.el.empty();var e=this.SYMBOLS[t],i=this.el[0];if(e){var s=e.matches(/<svg viewBox="(.+?)">([\s\S]+?)<\/svg>/),n=s[1],o=s[2],a=n.split(" "),r=a[2],l=a[3];i.setAttribute("viewBox",n),i.setAttribute("width",r+"px"),i.setAttribute("height",l+"px");var c=document.createElement("div");c.innerHTML="<svg>"+o+"</svg>";for(var h=Array.from(c.childNodes[0].childNodes),d=0,u=h.length;d<u;d++)i.appendChild(h[d])}else i.setAttribute("viewBox","0 0 20 20"),i.setAttribute("width","20px"),i.setAttribute("height","20px")}}),w.getComponent("icon").extendSymbols=function(t){w.extend(w.getComponent("icon").prototype.SYMBOLS,t)},w.getComponent("icon").extendSymbols({"youtan-account":'\t\t<svg viewBox="0 0 16.64 19.22">\t\t\t<path style="fill:currentColor;opacity:1;" class="cls-1" d="M1392.36,671.08c-.58,0-1.23,0-1.94,0-8,0-8.32-2.22-8.32-2.22a7.31,7.31,0,0,1,3.86-6.45l.13-.09a5.31,5.31,0,0,1,3.33-9.46,11.78,11.78,0,0,1,2.94.37,5.31,5.31,0,0,0-1.4,9.09l-.13.09a7.31,7.31,0,0,0-3.86,6.45S1386.42,670.75,1392.36,671.08Z" transform="translate(-1381.1 -651.91)"/>\t\t\t<circle style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;" class="cls-2" cx="8.32" cy="6.32" r="5.32"/>\t\t\t<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;" class="cls-2" d="M1395.19,664.42a7.29,7.29,0,0,1,1.54,4.5" transform="translate(-1381.1 -651.91)"/>\t\t\t<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;;" class="cls-2" d="M1382.1,668.91a7.32,7.32,0,0,1,3.86-6.45" transform="translate(-1381.1 -651.91)"/>\t\t\t<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;opacity:0.1;" class="cls-3" d="M1386.59,657.66a2.4,2.4,0,0,1,1.93-2" transform="translate(-1381.1 -651.91)"/>\t\t</svg>\t',video:'\t\t<svg viewBox="0 0 20.35 15.25">\t\t\t<defs><style>.cls-1,.cls-3{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;}.cls-1{stroke-width:2px;}.cls-2{fill:currentColor;opacity:0.1;}</style></defs>\t\t\t<title>矢量智能对象1</title>\t\t\t<path class="cls-1" d="M1268.58,657.48v-1.72a2.32,2.32,0,0,0-2.32-2.32h-8.64a2.32,2.32,0,0,0-2.32,2.31l0,8.61a2.32,2.32,0,0,0,2.32,2.32h8.65a2.32,2.32,0,0,0,2.32-2.31v-1.79l5.06,2.35v-7.48l-2.21.76" transform="translate(-1254.29 -652.44)"/>\t\t\t<path class="cls-2" d="M1263.91,666.68h-6.3a2.32,2.32,0,0,1-2.32-2.32l0-8.61a2.31,2.31,0,0,1,2.32-2.31h6.29a2.32,2.32,0,0,0-2.32,2.31v8.61A2.31,2.31,0,0,0,1263.91,666.68Z" transform="translate(-1254.29 -652.44)"/>\t\t\t<line class="cls-3" x1="4.71" y1="4.4" x2="4.71" y2="9.59"/>\t\t</svg>\t',down:'\t\t<svg viewBox="0 0 12 12">\t\t\t<polyline style="stroke-linecap:round;" points="1.5,3.3 6,8.3 10.5,3.3"/>\t\t</svg>\t',"down-trangle":'\t\t<svg viewBox="0 0 12 12">\t\t\t<polygon  points="6.5,0 3.2,4.2 0,0 "/>\t\t</svg>\t',search:'\t\t<svg viewBox="0 0 20 20">\t\t\t<circle style="stroke-miterlimit:10;" cx="8.5" cy="8.5" r="7"/>\t\t\t<line style="stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" x1="15.8" y1="15.7" x2="18.5" y2="18.4"/>\t\t</svg>\t',"search-thick":'\t\t<svg viewBox="0 0 17 17">\t\t\t<circle style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" cx="7.5" cy="7.5" r="6.5"/>\t\t\t<line style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" x1="14" y1="14" x2="16" y2="16"/>\t\t\t<path style="stroke-linecap:round;stroke-linejoin:round;" d="M4.5,7c0-1.9,1.6-3.5,3.5-3.5"/>\t\t</svg>\t',star:'\t\t<svg viewBox="0 0 22 22">\t\t\t<path style="fill:currentColor; stroke:none;" d="M19,9.2c-0.1-0.3-0.4-0.5-0.7-0.6L13.8,8l-2-4c-0.2-0.3-0.5-0.5-0.8-0.5c-0.3,0-0.6,0.2-0.8,0.5l-2,4L3.7,8.6C3.4,8.6,3.1,8.9,3,9.2C2.9,9.5,3,9.8,3.3,10l3.2,3.1l-0.8,4.4c-0.1,0.3,0.1,0.6,0.3,0.8c0.3,0.2,0.7,0.3,1,0.1l4-2.1l4,2.1c0.1,0.1,0.3,0.1,0.4,0.1c0.2,0,0.4-0.1,0.5-0.2c0.3-0.2,0.4-0.5,0.3-0.8l-0.8-4.4l3.2-3.1C19,9.8,19.1,9.5,19,9.2z"/>\t\t</svg>\t',radio:'\t\t<svg viewBox="0 0 18 18">\t\t\t<path style="stroke:none; fill:currentColor" d="M12.7,4.3C11,6.6,8.9,9.1,8.1,12c-0.9-1-1.9-2-2.9-2.8c-0.7-0.5-1.6,0.4-0.9,1c1.3,1,2.5,2.3,3.7,3.6c0.3,0.3,1,0.2,1.1-0.3C9.6,10.3,12,7.6,13.9,5C14.4,4.3,13.2,3.6,12.7,4.3"/>\t\t</svg>\t',checkbox:'\t\t<svg viewBox="0 0 18 18">\t\t\t<path style="stroke:none; fill:currentColor" d="M12.7,4.3C11,6.6,8.9,9.1,8.1,12c-0.9-1-1.9-2-2.9-2.8c-0.7-0.5-1.6,0.4-0.9,1c1.3,1,2.5,2.3,3.7,3.6c0.3,0.3,1,0.2,1.1-0.3C9.6,10.3,12,7.6,13.9,5C14.4,4.3,13.2,3.6,12.7,4.3"/>\t\t</svg>\t',up:'\t\t<svg viewBox="0 0 10 10">\t\t\t<polyline style="stroke-linecap:round;stroke-miterlimit:10;" points="9.5,7.3 5,2.3 0.5,7.3"/>\t\t</svg>\t',close:'\t\t<svg viewBox="0 0 10 10">\t\t\t<rect x="4.5" y="-1.5" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -2.0563 4.9852)" style="fill:currentColor;stroke:none;" width="1" height="13"/>\t\t\t<rect x="-1.5" y="4.5" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -2.0919 5)" style="fill:currentColor;stroke:none;" width="13" height="1"/>\t\t</svg>\t',"close-wide":'\t\t<svg viewBox="0 0 12 12">\t\t\t<line style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" x1="1" y1="1" x2="11" y2="11"/>\t\t\t<line style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" x1="11" y1="1" x2="1" y2="11"/>\t\t</svg>\t'}),w.registerComponent("radio",{template:'\n\t\t<div class="radio" :class.active="checked" @click="onClick">\n\t\t\t<div class="radio-icon">\n\t\t\t\t<icon type="radio"></icon>\n\t\t\t</div>\n\t\t\t<div class="radio-label">\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t</div>\n\t',checked:!1,value:"",onCreated:function(){var t=this.closest("radio-group");t&&(this.group=t,this.checked=t.value==this.value,t.register(this))},onGroupValueChange:function(){var t=this.closest("radio-group");t&&(this.group=t,this.checked=t.value==this.value)},onClick:function(){this.checked||(this.checked=!0,this.trigger("change",this.value))}}),w.registerComponent("radio-group",{template:'\n\t\t<div class="radio-group">\n\t\t\t<slot></slot>\n\t\t</div>\n\t',value:"",onCreated:function(){this.radios=[]},onReady:function(){var i=this;this.watch("value",function(){for(var t=0,e=i.radios.length;t<e;t++)i.radios[t].onGroupValueChange()})},register:function(t){this.radios.push(t),t.on("change",this.onRadioChange.bind(this,t))},onRadioChange:function(t){var e,i=_createForOfIteratorHelper(this.radios);try{for(i.s();!(e=i.n()).done;){var s=e.value;s!==t&&(s.checked=!1)}}catch(t){i.e(t)}finally{i.f()}this.value=t.value,this.trigger("change",this.value)}}),w.registerComponent("checkbox",{template:'\n\t\t<div class="checkbox" :class.active="checked" @click="onClick">\n\t\t\t<div class="checkbox-icon">\n\t\t\t\t<icon type="checkbox"></icon>\n\t\t\t</div>\n\t\t\t<div class="checkbox-label">\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t</div>\n\t',_modelProperty:"checked",checked:!1,value:"",data:null,onCreated:function(){var e=this,t=this.closest("checkbox-group");t&&(this.group=t,this.checked=-1<t.value.findIndex(function(t){return t==e.value}),t.register(this))},onClick:function(){this.checked=!this.checked,this.data&&(this.checked?this.data.add(this.value):this.data.remove(this.value)),this.trigger("change",this.checked)}}),w.registerComponent("checkbox-group",{template:'\n\t\t<div class="checkbox-group">\n\t\t\t<slot></slot>\n\t\t</div>\n\t',value:null,onCreated:function(){this.value=this.value||[],this.checkboxs=[]},register:function(t){this.checkboxs.push(t),t.on("change",this.onCheckboxChange.bind(this,t))},onCheckboxChange:function(e){e.checked?this.value.push(e.value):this.value.removeWhere(function(t){return t==e.value}),this.trigger("change",this.value)}}),w.registerComponent("switch",{template:'\n\t\t<div class="switch" :class.active="value" @click="onClick">\n\t\t\t<div class="switch-ball"></div>\n\t\t\t<slot></slit>\n\t\t</div>\n\t',value:!1,onReady:function(){this.checkbox=this.el.find("[type=checkbox]"),this.checkbox.length&&(this.value=this.checkbox[0].checked)},onClick:function(){this.value=!this.value,this.checkbox.length&&(this.checkbox[0].checked=this.value),this.trigger("change",this.value)}}),w.registerComponent("form-fields",{template:"<form class=\"form-fields\" :autocomplete=\"autoComplete ? 'on' : 'off'\"><slot></slot></form>",messages:{required:apower.tr("This field is required@@field_required"),email:apower.tr("Please input a valid email address@@invalid_email"),phone:apower.tr("Please input a valid phone number@@invalid_phone"),minlength:function(t,e){return apower.tr("The minimum length should be {0}@@length_must_more",e.attr("minLength"))}},validators:{required:function(t){return!!t.trim()},email:function(t){return/^[\w-\+]+(?:\.[\w-\+]+)*@[\w-\+]+(?:\.[\w-\+]+)+$/.test(t.trim())},phone:function(t){return/^\d{7,14}$/.test(t.trim())},minlength:function(t,e){return t.trim().length>=e.attr("minLength")||0}},onlyValidateFirst:!1,autoComplete:!0,onCreated:function(){this.fields=[]},onReady:function(){this.el.find("button").on("click",function(t){return t.preventDefault()}),this.el.find("input[type=submit]").on("click",this.onSubmit,this),this.el.find("input").on("keydown",this.onKeydown,this)},register:function(t){this.fields.push(t)},getFieldValue:function(t){return this.getField(t).getValue()},getField:function(e){return this.fields.find(function(t){return t.name===e})},setFieldValue:function(e,t){this.fields.find(function(t){return t.name===e}).setValue(t)},onKeydown:function(t){13===t.keyCode&&this.onSubmit(t)},onSubmit:function(t){t.preventDefault(),this.validate()&&this.trigger("submit",this.getData())},validate:function(){var t=!0;this.onlyValidateFirst&&this.setUnTouched();var e,i=_createForOfIteratorHelper(this.fields);try{for(i.s();!(e=i.n()).done;){var s=e.value,n=s.validate();if(t&&!n&&s.focus(),!(t=t&&n)&&this.onlyValidateFirst)break}}catch(t){i.e(t)}finally{i.f()}return t},validateFields:function(t){var e,i=!0,s=_createForOfIteratorHelper(this.fields);try{for(s.s();!(e=s.n()).done;){var n=e.value;if(t.includes(n.name)&&!(i=i&&n.validate())&&this.onlyValidateFirst)break}}catch(t){s.e(t)}finally{s.f()}return i},setUnTouched:function(){var t,e=_createForOfIteratorHelper(this.fields);try{for(e.s();!(t=e.n()).done;){t.value.setUnTouched()}}catch(t){e.e(t)}finally{e.f()}},setError:function(t){var e,i=_createForOfIteratorHelper(this.fields);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(s.hasRule(t))return s.setError(t),!0}}catch(t){i.e(t)}finally{i.f()}return console.warn('No field match rule "'.concat(t,'"')),!1},getData:function(t){var e,i={},s=_createForOfIteratorHelper(this.fields);try{for(s.s();!(e=s.n()).done;){var n=e.value;n.name&&(i[n.name]=n.getValue())}}catch(t){s.e(t)}finally{s.f()}return t&&w.extend(i,t),i},getFormData:function(){var t,e=new FormData,i=_createForOfIteratorHelper(this.fields);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.name&&e.append(s.name,s.getValue())}}catch(t){i.e(t)}finally{i.f()}if(overwrite){var n,o=_createForOfIteratorHelper(overwrite);try{for(o.s();!(n=o.n()).done;){var a=n.value;e.append(a,overwrite[a])}}catch(t){o.e(t)}finally{o.f()}}return e}}),w.registerComponent("field",{template:'\n\t\t<div class="field" :class.field-border-through="borderThrough" :class.touched="touched" :class.invalid="errorText" :class.valid="!errorText">\n\t\t\t<div class="field-input-wrap"><slot></slot></div>\n\t\t\t<div class="field-error-text" f-html="errorText"></div>\n\t\t</div>\n\t',messages:{},validators:{},rules:["required"],form:null,touched:!1,errorText:"",validateWhen:"change",borderThrough:!1,onCreated:function(){var t=this.closest("form-fields");if(!t)throw new Error('"field" must be contained by a "form-fields"');t.register(this),this.form=t;var e,i=_createForOfIteratorHelper(this.rules);try{for(i.s();!(e=i.n()).done;){var s=e.value;this.messages[s]||this.form.messages[s]||console.warn('"message" for rule "'.concat(s,'" is not defined'))}}catch(t){i.e(t)}finally{i.f()}},onReady:function(){var t=this;this.input=this.el.find("textarea, input"),this.input.on("input",this.onInput,this),this.name=this.input.attr("name"),["change","blur"].includes(this.validateWhen)&&this.input.on(this.validateWhen,this.validate,this),1===this.el.find(".drop-select").length&&this.el.find(".drop-select").com().on("change",function(){w.nextTick(function(){t.validate()})})},onInput:function(){"input"===this.validateWhen?this.validate():this.input.val().trim()&&(this.errorText=""),this.input.val().trim()?this.el.addClass("inputted"):this.el.removeClass("inputted")},getValue:function(){if("file"!==this.input[0].type)return this.input.val();this.input[0].files[0]},setValue:function(t){this.input.val(t)},validate:function(){var t,e=!0,i=_createForOfIteratorHelper(this.rules);try{for(i.s();!(t=i.n()).done;){var s=t.value,n=this.messages[s]||this.form.messages[s];if(!(e=this.isRuleValid(s))){this.setErrorMessage(n);break}}}catch(t){i.e(t)}finally{i.f()}return e&&(this.errorText=""),this.setTouched(),e},isRuleValid:function(t){var e=this.validators[t]||this.form.validators[t];return!e||e.call(this,this.input.val(),this.input)},focus:function(){this.input.focus()},setTouched:function(){this.touched=!0},setUnTouched:function(){this.touched=!1,this.errorText=""},hasRule:function(e){return-1<this.rules.findIndex(function(t){return t==e})},setError:function(t){var e=this.messages[t]||this.form.messages[t];e?this.setErrorMessage(e):console.warn('"message" for rule "'.concat(t,'" is not defined'))},setErrorMessage:function(t){this.setTouched(),this.errorText="function"==typeof t?t.call(this,this.input.val(),this.input):t}}),w.registerComponent("drop",{template:'\n\t\t<div class="drop">\n\t\t\t<slot></slot>\n\t\t\t<icon :type="icon"></icon>\n\t\t\t<div class="drop-menu" :class="menuClass" ref="menu">\n\t\t\t\t<div class="ap-trangle"></div>\n\t\t\t</div>\n\t\t</div>\n\t',align:"b",gap:"0",menuClass:"",open:!1,event:"hover",icon:"down",onReady:function(){var t=this.el.find("ul");t.closest(this.menu).length||this.menu.append(t),this.isOld?(this.el.css("overflow","visible"),this.menu.css("position","fixed")):this.menu.appendTo(document.body),"hover"===this.event?window.innerWidth<=768?this.el.on("click",this.onMouseEnter,this):this.el.on("mouseenter",this.onMouseEnter,this):this.el.on(this.event,this.onClick,this),"mousedown"===this.event&&this.menu.on("mousedown",this.preventMouseDown,this),this.menu.on("click",this.onClickMenu,this)},onMouseEnter:function(t){w(t.target).closest(this.menu).length||this.willShowMenu()&&(this.onBeforeMenuShow(),this.showMenu(),w.env.isTouch&&w("body").children().on("mousedown",this.onDocMouseDown,this),w.onceAllLeave([this.el,this.menu],200,this.hideMenu,this))},willShowMenu:function(){return!0},onBeforeMenuShow:function(){},showMenu:function(){this.el[0].className.includes("active")&&window.innerWidth<=768?this.hideMenu():(this.menu.stop().fadeIn(200),this.alignMenu(),this.el.addClass("active"),this.open=!0,w.nextTick(this.onAfterMenuShow,this))},alignMenu:function(){this.menu.alignTo(this.el,this.align,this.gap,!0)},onAfterMenuShow:function(){},onClickMenu:function(){this.hideMenu()},hideMenu:function(){this.menu.stop().fadeOut(200),this.el.removeClass("active"),this.open=!1,w(document).off("mousedown",this.onDocMouseDown,this)},onClick:function(t){w(t.target).closest(this.menu).length||(this.open?this.hideMenu():(this.onBeforeMenuShow(),this.showMenu(),w(document).on("mousedown",this.onDocMouseDown,this)),t.preventDefault(),t.stopPropagation())},onDocMouseDown:function(t){w(t.target).closest(this.el).length||w(t.target).closest(this.menu).length||this.hideMenu()},preventMouseDown:function(t){t.preventDefault()},onDestroy:function(){this.menu.remove()}}),w.registerComponent("drop-select","drop",{template:'\n\t\t<div class="drop drop-select">\n\t\t\t<slot>{{getDisplay()}}</slot>\n\t\t\t<icon :type="icon"></icon>\n\t\t\t<div class="drop-menu drop-select-menu" :class="menuClass" ref="menu">\n\t\t\t\t<ul>\n\t\t\t\t\t<li f-for="item of getOptionData()" @click="selectValue(item[0])" :class.active="value == item[0]">{{item[1]}}</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t',event:"click",value:"",data:null,select:null,minMenuWidth:0,onReady:function(){this.initInnerSelect(),"mousedown"===this.triggerType&&this.ul.on("mousedown",function(t){return t.preventDefault()})},initInnerSelect:function(){var i,t=this.el.find("select");t.length&&(this.select=t,this.el.append(this.select),this.value=t.val(),i=this.data=[],t.find("option").map(function(t,e){i.push([e.value,e.textContent])}),this.on("change",function(i){t.find("option").filter(function(t,e){return e.value==i}).attr("selected",!0)},this))},getDisplay:function(){var t,e=_createForOfIteratorHelper(this.getOptionData());try{for(e.s();!(t=e.n()).done;){var i=_slicedToArray(t.value,2),s=i[0],n=i[1];if(s===this.value)return n}}catch(t){e.e(t)}finally{e.f()}return this.value},getOptionData:function(){var t=this.data,e=[];if(t)if(t.length)for(var i=0;i<t.length;i++){var s=t[i],n=s;Array.isArray(s)&&(n=s[1],s=s[0]),e.push([s,n])}else if("object"===_typeof(t))for(var o in t){var a=t[o];e.push([o,a])}return e},selectValue:function(t){this.setValue(t),this.trigger("select",t)},setValue:function(t){this.hideMenu(),t!==this.value&&(this.value=t,this.setValueToInnerSelect(t),this.trigger("change",t))},setValueToInnerSelect:function(t){this.select&&(this.select.find("option").removeAttr("selected"),this.select.find("option[value="+t+"]").attr("selected","selected"))},onBeforeMenuShow:function(){this.setMenuWidth()},setMenuWidth:function(){var t=Math.max(this.minMenuWidth,this.el[0].offsetWidth);this.menu.css("min-width",t)}}),w.registerComponent("color-select","drop-select",{template:'\n\t\t<div class="drop drop-select color-select">\n\t\t\t<slot>{{value}}</slot>\n\t\t\t<icon :type="icon"></icon>\n\t\t\t<div class="drop-menu color-select-menu" :class="menuClass" ref="menu">\n\t\t\t\t<div class="ap-trangle"></div>\n\t\t\t\t<ul>\n\t\t\t\t\t<li f-for="color of data" @click="selectValue(color)" :class.active="value == color" :style.background-color="color"></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t',value:"#000000",data:["#000000","#424242","#626262","#9d9d95","#c7c7c7","#efefef","#f7f7f7","#ffffff","#ff0000","#ff9d00","#ffff00","#00ff00","#00ffff","#0000ff","#9d00ff","#ff00ff","#f7c7cf","#ffebcb","#ffebcb","#d7efd7","#d3dbe7","#cfe7f7","#d3dbe7","#e7d7df","#e79d9d","#ffc79d","#ffe79d","#b5d7a5","#a5c7cf","#9dc7ef","#b5a5d7","#d7a5bd","#e76262","#f7ad6a","#ffd762","#95bd7a","#72a5ad","#6aaddf","#8d7ac7","#c77aa5","#cf0000","#e79538","#efc730","#6aa54a","#4a7a8d","#3885c7","#624aa5","#a54a7a","#9d0000","#b56208","#bd9500","#387a20","#104a5a","#085295","#301872","#721842","#620000","#7a3800","#285218","#285218","#083038","#003062","#20104a","#4a1030"]}),w.registerComponent("inputable-select","drop-select",{template:'\n\t\t<div class="drop drop-select inputable-select">\n\t\t\t<slot>{{value}}</slot>\n\t\t\t<icon :type="icon"></icon>\n\t\t\t<div class="drop-menu inputable-select-menu" :class="menuClass" ref="menu" hidden>\n\t\t\t\t<div class="inputable-select-search" :class.active="suggest">\n\t\t\t\t\t<input type="text" f-model="suggest" ref="input">\n\t\t\t\t\t<icon type="search-thick"></icon>\n\t\t\t\t</div>\n\t\t\t\t<ul>\n\t\t\t\t\t<li f-for="item of getOptionData()" @click="selectValue(item[0])" :class.active="value == item[0]">{{item[1]}}</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t',align:"bl",gap:"10 -40",suggest:"",onReady:function(){var t=this;this.watch("suggest",function(){t.alignMenu()})},onAfterMenuShow:function(){this.input.focus()},getOptionData:function(){var t=this.data,e=this.suggest.toLowerCase(),i=[];if(t)if(t.length)for(var s=0;s<t.length;s++){var n=t[s],o=n;Array.isArray(n)&&(o=n[1],n=n[0]),e&&!o.toLowerCase().includes(e)||i.push([n,o])}else if("object"===_typeof(t))for(var a in t){var r=t[a];e&&!r.toLowerCase().includes(e)||i.push([a,r])}return i}}),w.registerComponent("win",{template:'\n\t\t<div class="win" f-loading="loading">\n\t\t\t<div class="win-head" ref="head"></div>\n\t\t\t<div class="win-body" ref="body"></div>\n\t\t\t<div class="win-foot" ref="foot"></div>\n\t\t</div>\n\t',autoDestroy:!1,target:"body",mask:!0,hideByDefault:!0,scrollTop:0,onReady:function(){var e=this;this.hideByDefault&&this.el.hide(),this.body&&this.body.stopScroll(),this.on("show",this.onShow,this),this.on("hide",this.onHide,this),this.mask&&(this.maskEl=w('<div class="win-mask" ref="maskEl"></div>'),this.on("show",function(t){e.el.before(e.maskEl),e.maskEl.css("z-index",e.el.css("z-index")),e.maskEl.stop().fadeIn(t)}),this.on("hide",function(){e.maskEl.stop().fadeOut(200)}),this.on("destroy",function(){e.maskEl.remove()})),this.closeEl=this.createFromTemplate('<div class="win-close" ref="closeEl"><icon type="close-wide"></icon></div>').appendTo(this.el),this.closeEl.on("click",this.whenCloseWin,this)},onDestroy:function(){w(window).off("resize",this.alignWin,this),w("body").removeClass("body-fixed"),w(document).scrollTop(-this.scrollTop),this.maskEl&&this.maskEl.remove()},show:function(t){var e=0<arguments.length&&void 0!==t?t:200;this.el.show(),this.el.css("display","flex"),this.alignWin(),this.el.stop().fadeIn(e),this.trigger("show",e),this.scrollTop=-w(document).scrollTop(),w("body").addClass("body-fixed"),w("body").css("top",this.scrollTop+"px"),w(window).on("resize",this.alignWin,this)},alignWin:function(){this.el.alignTo(document.body,"c")},onShow:function(){},onHide:function(){},hide:function(){this.el.stop().fadeOut(200,this.onHidden.bind(this)),this.trigger("hide"),w("body").removeClass("body-fixed"),w(document).scrollTop(-this.scrollTop),w.env.isMobile&&w("body").removeClass("body-static"),w(window).off("resize",this.alignWin,this)},whenCloseWin:function(){this.hide()},onHidden:function(){this.autoDestroy&&this.destroy()},showLoading:function(){this.loading=!0},hideLoading:function(){this.loading=!1}}),w.msg=w.newComponent("win",{template:'\n\t\t<div class="win msg" :class="[\'msg-\' + type, class]" f-loading="loading">\n\t\t\t<div class="win-body msg-body" ref="body">\n\t\t\t\t<div class="msg-title" f-html="title" f-show="title"></div>\n\t\t\t\t<div class="msg-text" f-html="message" f-show="message"></div>\n\t\t\t\t<div class="msg-field" f-show="type === \'prompt\'">\n\t\t\t\t\t<input class="msg-input" type="text" f-model="value" @keydown="onKeydown(\'ok\')" required :attr="inputAttributes" ref="input">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="win-foot msg-foot" ref="foot">\n\t\t\t\t<button f-for="btn, text in buttons"\n\t\t\t\t\tf-disable="type === \'prompt\' && btn === \'ok\' && !value"\n\t\t\t\t\t@click="handleButton(btn)"\n\t\t\t\t\t:attr.type="btn === \'ok\' ? \'primary\' : \'\'"\n\t\t\t\t>{{text}}</button>\n\t\t\t</div>\n\t\t</div>\n\t',type:"",target:"",onReady:function(){this.closeEl.$on("click",this.onCancelMsg,this)},onCancelMsg:function(){this.handleButton("cancel")},onKeydown:function(t){10!==t.keyCode&&13!==t.keyCode||this.handleButton("ok")},handleButton:function(t){this.hide(),this.fn&&this.fn.call(this.scope,t,this.value),this.resolve("prompt"===this.type?"ok"===t?this.value:"":t)},showMsg:function(t,e,i,s,n,o,a){var r=this;return this.el.parent().length||this.el.appendTo("body"),"string"==typeof e&&(o=n,n=s,s=i,i=e,e=null),"string"!=typeof s&&(o=n,n=s,s=i,i=""),"function"!=typeof n&&(a=n,n=null),a=a||{},this.type=t,this.buttons=e||a.buttons,this.title=i||a.title,this.message=s,this.fn=n||a.handler,this.scope=o,this.value=a.value||"",this.class=a.class,this.inputAttributes=a.inputAttributes,this.buttons||(this.buttons=this.defaultButtons[t]),Array.isArray(this.buttons)&&(this.buttons=this.buttons.index(function(t){return[t,apower.tr(r.buttonTexts[t])]})),this.promise=new Promise(function(t){r.resolve=t}),w.digest(),w.nextTick(function(){r.show(),"prompt"===r.type&&r.input.focus()}),this.promise},buttonTexts:{ok:"OK@@001410",yes:"Yes@@yes",no:"No@@no",cancel:"Cancel@@cancel"},defaultButtons:{info:[],alert:["ok"],error:["ok"],success:["ok"],prompt:["ok"],confirm:["cancel","ok"]},info:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["info"].concat(e))},alert:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["alert"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["error"].concat(e))},success:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["success"].concat(e))},prompt:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["prompt"].concat(e))},confirm:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.showMsg.apply(this,["confirm"].concat(e))}}),w.notify=w.newComponent({template:'\n\t\t<div class="notify">\n\t\t\t<div class="notify-item"\n\t\t\t\tf-for="item of stack"\n\t\t\t\tf-transition="fade"\n\t\t\t\t:class="\'notify-type-\' + item.type"\n\t\t\t>\n\t\t\t\t<div class="notify-content">\n\t\t\t\t\t<div class="notify-icon" :class="\'notify-icon-\' + item.type"></div>\n\t\t\t\t\t<div class="notify-text">{{item.message}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t',hideDelay:3e3,target:"body",onCreated:function(){this.stack=[]},showNotify:function(t){var e=this;this.stack.push(t);var i=Math.max(0,w(".header")[0]?w(".header")[0].getBoundingClientRect().bottom:0);this.el.css("top",i),w.digest(),w.defer(function(){e.stack.remove(t),w.digest()},t.hideDelay||this.hideDelay)},alert:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};return i.type="alert",i.message=t,this.showNotify(i)},success:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};return i.type="success",i.message=t,this.showNotify(i)}}),w.registerComponent("wysiwyg",{template:'\n\t\t<div class="wysiwyg">\n\t\t\t<div class="wysiwyg-toolbar" ref="toolbar" @mousedown="onToolbarMouseDown">\n\t\t\t\t<div class="wysiwyg-button" f-for="button of toolbars"\n\t\t\t\t\t:class="\'wysiwyg-button-\' + button"\n\t\t\t\t\t:class.active="activeToolbars.includes(button)" \n\t\t\t\t\t@mousedown="onButtonMouseDown(button)"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<div class="wysiwyg-editor" contenteditable="true" ref="editor"\n\t\t\t\t@mouseup="onEditorMouseUp"\n\t\t\t\t@keydown="onKeyDown"\n\t\t\t\t@input="onInput"\n\t\t\t\t@blur="onBlur"\n\t\t\t\t@paste="onPaste"\n\t\t\t\t@dragenter="onDragEnter"\n\t\t\t\t@dragleave="onDragLeave"\n\t\t\t\t@dragover="onDragOver"\n\t\t\t\t@drop="onDrop"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<slot></slot>\n\t\t</div>\n\t',TOOLBARS:{heading:"Heading@@heading",bold:"Bold@@bold",italic:"Italic@@italic",underline:"Underline@@underline",emoji:"Emoji@@add_an_emoji",link:"Insert Link@@insert_link",image:"Insert Image@@insert_image","align-left":"Align Left@@align_left","align-center":"Align Center@@align_center","align-right":"Align Right@@align_right","align-justify":"Align Justify@@align_justify",color:"Text Color@@text_color",background:"Background Color@@background_color",undo:"Undo@@undo",redo:"Redo@@redo"},STYLE_TOOLBARS:["bold","italic","underline","align-left","align-center","align-right","align-justify"],COMMANDS:{heading:"heading",bold:"bold",italic:"italic",underline:"underline",emoji:"emoji","align-left":"justifyLeft","align-center":"justifyCenter","align-right":"justifyRight","align-justify":"justifyFull",undo:"undo",redo:"redo"},emojis:["🙂","😀","🙁","😮","😯","😕","😎","😡","😛","😐","😉","😆","😳","😥","👿","❗","❓","💡"],toolbars:null,activeToolbars:null,name:"",textarea:null,saveAndRestore:!0,value:"",saved:!1,onCreated:function(){this.toolbars?"string"==typeof this.toolbars&&(this.toolbars=this.toolbars.split(" ")):this.toolbars=Object.keys(this.TOOLBARS),this.activeToolbars||(this.activeToolbars=["align-left"]),this.saveAndRestore&&w(window).on("unload",this.saveContentIfNotSaved,this)},saveContentIfNotSaved:function(){this.saved||this.saveContent()},saveContent:function(){this.saveContentToURL(location.href)},saveContentToURL:function(t){var e=this.getValue();e?(w.store.set("wysiwyg_content",e),w.store.set("wysiwyg_url",t)):(w.store.remove("wysiwyg_content"),w.store.remove("wysiwyg_url")),this.saved=!0},getValue:function(){return this.editor.html().replace(/<p>\s*<\/p>/g,"").trim()},setValue:function(t){this.editor.html(t),this.textarea.val(t)},clearValue:function(){this.setValue("<p></p>")},focus:function(){this.editor.focus()},onReady:function(){this.initHeading(),this.initEmojiSelect(),this.initColorSelect(),this.initBackgroundSelect(),this.initTextarea(),this.initToolbarTips(),document.execCommand("enableObjectResizing",!1,!1),document.execCommand("defaultParagraphSeparator",!1,"p"),this.value&&this.setValue(this.value)},initHeading:function(){this.headingSelect=this.newComponent("drop-select",{target:this.toolbar.find(".wysiwyg-button-heading"),event:"mousedown",menuClass:"wysiwyg-menu wysiwyg-heading-menu",icon:"",align:"bl",gap:"0",data:{h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",p:apower.tr("Paragrah@@paragrah")},value:"p"}),this.headingSelect.on("select",this.onSelectHeading,this)},onSelectHeading:function(t){this.exec("formatBlock",t)},initEmojiSelect:function(){this.emojiSelect=w.newComponent("drop-select",{target:this.toolbar.find(".wysiwyg-button-emoji"),event:"mousedown",menuClass:"wysiwyg-menu wysiwyg-emoji-menu",icon:"",align:"bl",gap:"0",data:this.emojis}),this.emojiSelect.on("select",this.onSelectEmoji,this)},onSelectEmoji:function(t){this.exec("insertText",t)},initColorSelect:function(){this.colorSelect=w.newComponent("color-select",{target:this.toolbar.find(".wysiwyg-button-color"),event:"mousedown",menuClass:"wysiwyg-menu",icon:"",align:"bl",gap:"0"}),this.colorSelect.on("select",this.onSelectColor,this)},onSelectColor:function(t){this.exec("foreColor",t)},initBackgroundSelect:function(){this.backgroundSelect=w.newComponent("color-select",{target:this.toolbar.find(".wysiwyg-button-background"),event:"mousedown",menuClass:"wysiwyg-menu",icon:"",align:"bl",gap:"0"}),this.backgroundSelect.on("select",this.onSelectBackground,this)},onSelectBackground:function(t){this.exec("backColor",t)},initTextarea:function(){var t;this.textarea||(t=this.el.find("textarea"),this.textarea=t.length?t:this.createFromHTML('<textarea :name="name" ref="textarea"></textarea>').appendTo(this.el),this.textarea.hide()),this.setValue(this.textarea.val()||this.textarea.textContent)},initToolbarTips:function(){for(var t=this.toolbars.length-1;0<=t;t--){var e=this.toolbars[t];this.newDirective("tip",{el:this.toolbar.find(".wysiwyg-button-"+e),value:apower.tr(this.TOOLBARS[e])})}},save:function(){var t=getSelection();0<t.rangeCount&&(this.range=t.getRangeAt(0))},restore:function(){var t,e;this.range?((e=0<(t=getSelection()).rangeCount?t.getRangeAt(0):document.createRange()).setStart(this.range.startContainer,this.range.startOffset),e.setEnd(this.range.endContainer,this.range.endOffset),this.range=null,0===t.rangeCount&&t.addRange(e)):this.focus()},exec:function(t,e){if(document.activeElement!=this.editor[0]&&this.restore(),document.queryCommandSupported(t))document.execCommand(t,!1,e);else if("insertText"===t&&(t="insertHTML",e=w.encodeHTML(e)),"insertHTML"===t){var i=window.getSelection();if(i.rangeCount){var s=i.getRangeAt(0);s.deleteContents();var n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)s.insertNode(n.firstChild);s.collapse(!1)}}},onToolbarMouseDown:function(t){t.preventDefault()},onButtonMouseDown:function(t){var e,i;this.STYLE_TOOLBARS.includes(t)?(this.activeToolbars.includes(t)?this.setButtonState(t,!1):this.setButtonState(t,!0),e=this.COMMANDS[t],this.exec(e,null)):["redo","undo"].includes(t)?(i=this.COMMANDS[t],this.exec(i,null)):"link"===t?this.addOrRemoveLink():"image"===t&&this.addImage(),this.save()},setButtonState:function(t,e){var i=this.toolbar.find(".wysiwyg-button-"+t);if(t.startsWith("align-")){for(var s=this.activeToolbars.length-1;0<=s;s--){var n=this.activeToolbars[s];n.startsWith("align-")&&(this.activeToolbars.splice(s,1),this.toolbar.find(".wysiwyg-button-"+n).removeClass("active"))}this.activeToolbars.push(t),e=!0}else this.activeToolbars.includes(t)&&!e?this.activeToolbars.remove(t):!this.activeToolbars.includes(t)&&e&&this.activeToolbars.push(t);e?i.addClass("active"):i.removeClass("active")},addOrRemoveLink:function(){var t=getSelection().focusNode;t&&w(t).closest("a").length?this.exec("unlink"):this.addLink()},addLink:function(){var s=this,t=getSelection().toString(),e=w.newComponent("win",{template:'\n\t\t\t\t<div class="win wysiwyg-win wysiwyg-link-win">\n\t\t\t\t\t<div class="win-head" ref="head">Insert link@@insert_link</div>\n\t\t\t\t\t<div class="win-body" ref="body">\n\t\t\t\t\t\t<div class="wysiwyg-field">\n\t\t\t\t\t\t\t<label class="wysiwyg-label">{{\'URL@@url\' | trans}}:</label>\n\t\t\t\t\t\t\t<input type="text" class="wysiwyg-input" f-model="url" ref="urlInput" f-focus>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="wysiwyg-field">\n\t\t\t\t\t\t\t<label class="wysiwyg-label">{{\'Text@@text\' | trans}}:</label>\n\t\t\t\t\t\t\t<input type="text" class="wysiwyg-input" f-model="text" ref="textInput" value="{text}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="win-foot" ref="foot">\n\t\t\t\t\t\t<button @click="hide">Cancel@@cancel</button>\n\t\t\t\t\t\t<button type="primary" @click="onOK">OK@@001410</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',autoDestroy:!0,text:t,url:"",onOK:function(){var t,e,i=this.url.trim();i?(t=this.textInput.val().trim()||i,this.hide(),s.doAddingLink(i,t)):((e=this.newDirective("tip",{el:this.urlInput,tipClass:"wysiwyg-error",value:apower.tr("This field is required@@field_required")})).showTip(),this.urlInput.once("input",function(){e.unbind()}))}});e.show(),e.on("hide",this.restore,this)},doAddingLink:function(t,e){this.exec("insertHTML",'<a href="'+w.encodeHTML(t)+'">'+w.encodeHTML(e)+"</a>");var i,s=getSelection();s.focusNode&&s.focusNode&&((i=w(s.focusNode.parentNode).closest("a")).length&&s.extend(i[0]))},addImage:function(){w.selectFile("image/*",!1,this.onSelectImage,this)},onSelectImage:function(t){apower.uploadFile(t,this.onImageUploaded,this)},onImageUploaded:function(t){t&&this.exec("insertImage",t.url)},onEditorMouseUp:function(){this.checkCurrentStyle()},checkCurrentStyle:function(){var t,e,i,s=getSelection();s.anchorNode&&s.focusNode&&(t=w(s.anchorNode.parentNode),e=w(s.focusNode.parentNode),this.setButtonState("bold",400<t.css("font-weight")&&400<e.css("font-weight")),this.setButtonState("italic","italic"===t.css("font-style")&&"italic"===e.css("font-style")),this.setButtonState("underline",t.css("text-decoration").includes("underline")&&e.css("text-decoration").includes("underline")),"start"===(i=e.css("text-align"))?i="left":"end"===i&&(i="right"),this.setButtonState("align-"+i,!0),e.is("h2, h3, h4, h5, h6")?this.headingSelect.setValue(e[0].localName):this.headingSelect.setValue("p"))},onKeyDown:function(t){[33,34,35,36,37,38,39,40,46].includes(t.keyCode)&&this.checkCurrentStyle()},onInput:function(){this.saved=!1,this.trigger("input")},onBlur:function(){this.semantic();var t=this.getValue();this.textarea.val(t),this.value=t,this.trigger("change",t)},semantic:function(){for(var n=this.editor[0],t=Array.from(n.childNodes),o=[],e=function(){for(;0<o.length;){var t=o[0];if(3!==t.nodeType||t.textContent.trim())break;o.shift()}for(;0<o.length;){var e=o[o.length-1];if(3!==e.nodeType||e.textContent.trim())break;o.pop()}if(0<o.length){var i=document.createElement("p");n.insertBefore(i,o[0]);for(var s=0;s<o.length;s++)i.appendChild(o[s])}o=[]},i=0;i<t.length;i++){var s=t[i],a=!1;if(3===s.nodeType)o.push(s);else if(1===s.nodeType&&(getComputedStyle(s).display.includes("inline")?o.push(s):a=!0,"div"===s.localName&&s.textContent.trim())){var r=document.createElement("p");n.insertBefore(r,s);for(var l=Array.from(s.childNodes),c=0;c<l.length;c++)r.appendChild(l[c]);s.remove()}a&&e()}e()},onPaste:function(t){t.clipboardData.files&&t.clipboardData.files[0]&&t.clipboardData.files[0].type.startsWith("image/")&&(t.preventDefault(),this.onSelectImage(t.clipboardData.files[0]))},onDragEnter:function(t){t.preventDefault(),this.editor.addClass("dragging")},onDragLeave:function(t){t.preventDefault(),this.editor.removeClass("dragging")},onDragOver:function(t){t.preventDefault()},onDrop:function(t){t.preventDefault(),this.editor.removeClass("dragging"),t.dataTransfer.files&&t.dataTransfer.files[0]&&t.dataTransfer.files[0].type.startsWith("image/")&&this.onSelectImage(t.dataTransfer.files[0])}}),w.registerComponent("route",{template:'\n\t\t<div class="route" :class="routeClass" @click="onClick" f-loading="loading"></div>\n\t',map:null,redirects:null,defaultURL:"",prefix:"",ignoreURLs:null,routeClass:"",path:"",rule:null,loading:!0,query:null,onCreated:function(){this.map=this.map||{},this.oldCSSEls=null,this.cssEls=w(),this.loadedJs={},this.loadedPage={},this.query=w.parseQuery(location.search),this.initMap(),this.initURLChange()},onDestroy:function(){w(window).off("popstate",this.onStateChange,this)},onClick:function(t){var e,i=w(t.target).closest("a");i.length&&"_blank"!==i.attr("target")&&(!(e=i[0].href)||e.startsWith("javascript:")||e.endsWith("#")||this.goto(e)&&t.preventDefault())},initMap:function(){for(var t in this.map)this.map[t]=this.initMapItem(t,this.map[t]);if(this.redirects)for(var t in this.redirects)this.redirects[t]=this.initRedirectItem(t,this.redirects[t])},setMap:function(t,e){this.map[t]=this.initMapItem(t,e)},initMapItem:function(t,e){"string"==typeof e&&(e={template:e}),e.css="string"==typeof e.css?[e.css]:e.css||[],e.js="string"==typeof e.js?[e.js]:e.js||[];var i=_slicedToArray(this.getURLRE(t),2);return e.re=i[0],e.keys=i[1],e},initRedirectItem:function(t,e){"object"!==_typeof(e)&&(e={url:e});var i=_slicedToArray(this.getURLRE(t),1);return e.re=i[0],e},getURLRE:function(t){var s=[];return[new RegExp(t.replace(/(\/?):(\w+)/g,function(t,e,i){return i&&s.push(i),e+"?([\\w-]*?)"}).replace(/\/$/g,"/?").replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/^/,"^").replace(/$/,"$"),"i"),s]},initURLChange:function(){w(window).on("popstate",this.onStateChange,this)},onStateChange:function(t){t.state&&this.redirectTo(t.state.url)},goto:function(t){return this._load(t,"goto")},redirectTo:function(t){return this._load(t,"redirect")},load:function(t){return this._load(t,"load")},loadCurrentURL:function(){return this.redirectTo(location.href)},_load:function(t,e){var i=this.getRelativePathFromURL(t),s=this.findMatchedRoute(i);if(s)return this.onRouteMatched(i,t,s,e),!0;var n=this.getRedirectPath(i);return n&&n!==i?this.redirectTo(t):(this.defaultURL&&this.defaultURL!==i&&!this.willIgnore(i)&&this.redirectTo(this.defaultURL),!1)},gotoDefault:function(){this.goto(this.defaultURL)},getRelativePathFromURL:function(t){var e=location.protocol+"//"+location.hostname,i=t.replace(/[\?#].+/,"");return i.startsWith(e)&&(i=i.replace(e,"")),this.prefix&&i.startsWith(this.prefix)&&(i=i.slice(this.prefix.length)),i||"/"},findMatchedRoute:function(t){for(var e in this.map){var i=this.map[e];if(i.re.test(t))return i}return null},getRedirectPath:function(t){if(this.redirects)for(var e in this.redirects){var i=this.redirects[e];if(i.re.test(t))return i.url}},willIgnore:function(t){if(this.ignoreURLs)for(var e=0;e<this.ignoreURLs.length;e++){var i=this.ignoreURLs[e];if(i===t||i.test&&i.test(t))return!0}return!1},onRouteMatched:function(t,e,i,s){for(var n=this,o=w.parseQuery(e),a=t.matches(i.re,1),r=0;r<i.keys.length;r++){var l=i.keys[r];o[l]=a[r]}this.oldCSSEls=this.cssEls,this.cssEls=w();function c(){++d===u&&n.onSourceLoaded(i,t,o)}var h,d=0,u=0,p=_createForOfIteratorHelper(i.css);try{for(p.s();!(h=p.n()).done;){var f=h.value,m=w('<link rel="stylesheet" href="{0}">'.format(f));u++,this.cssEls=this.cssEls.add(m),m.appendTo("head").on("load",c)}}catch(t){p.e(t)}finally{p.f()}var v,g=_createForOfIteratorHelper(i.js);try{for(g.s();!(v=g.n()).done;)!function(){var t,e=v.value;n.loadedJs[e]||(u++,(t=document.createElement("script")).async=!1,t.src=e,document.head.appendChild(t),w(t).on("load",function(){n.loadedJs[e]=!0,c()}))}()}catch(t){g.e(t)}finally{g.f()}i.template&&(i.template=i.template.replace(/<template src="(.+?)"><\/template>/g,function(t,e){return u++,w.get(this.getPrefixedURL(e),function(t){i.template=i.template.replace('<template src="'+e+'"></template>',t),c()}.bind(this)),t}.bind(this))),"redirect"===s?this.replaceURL(e):"goto"===s&&this.pushURL(e),i.title&&(document.title=i.title),0===u?this.onSourceLoaded(i,t,o):this.loadedPage[t]||(this.loading=!0,this.loadedPage[t]=!0)},onSourceLoaded:function(t,e,i){this.loading=!1;var s,n=this.rule;if(n&&n.com)if(n.cache){var o,a=_createForOfIteratorHelper(n.com.el);try{for(a.s();!(o=a.n()).done;){var r=o.value;r.parentNode&&r.parentNode.removeChild(r)}}catch(t){a.e(t)}finally{a.f()}}else n.com.destroy(),n.com=null;this.rule=t,this.path=e,this.query=i,this.oldCSSEls.remove(),document.body.scrollTop=0,t.com?this.el.append(t.com.el):(s={prefix:this.prefix,target:this.el,query:this.query,route:this},t.template&&(s.template=t.template),t.com=this.newComponent(t.component||"",s)),this.trigger("goto",t),w.digest()},getPrefixedURL:function(t){var e;return this.prefix&&(e=location.protocol+"//"+location.hostname,t.startsWith(e)?((t=t.slice(e.length)).startsWith(this.prefix)||(t=this.prefix+t),t=e+t):t.startsWith(this.prefix)||(t=this.prefix+t)),t},replaceURL:function(t){t=this.getPrefixedURL(t),history.replaceState({url:t},null,t)},pushURL:function(t){t=this.getPrefixedURL(t),history.pushState({url:t},null,t)},clearCache:function(t){var e=this.map[t];e&&e.com&&(e.com.destroy(),e.com=null)},clearAllCache:function(){for(var t=0,e=Object.values(this.map);t<e.length;t++){var i=e[t];i.com&&(i.com.destroy(),i.com=null)}},formatHTML:function(t){var s=this;return this.prefix&&(t=t.replace(/href="(.+?)"/g,function(t,e){var i=s.getRelativePathFromURL(e);return s.findMatchedRoute(i)?'href="'+s.getPrefixedURL(e)+'"':t})),t}}),w.registerDirective("goto",{isLiteral:!0,value:"",route:null,bind:function(){this.route=this.vm.closest("route"),this.el.on("click",this.onClick,this)},update:function(t){this.value=t},onClick:function(){this.route.goto(this.value)}}),w.registerComponent("search-form","drop",{template:'\n\t\t<div class="search-form">\n\t\t\t<icon type="search-thick"></icon>\n\t\t\t<form class="drop-menu search-form-menu" target="_blank" action="https://www.google.com/search" :class="menuClass" ref="menu">\n\t\t\t\t<div class="ap-trangle"></div>\n\t\t\t\t<input type="hidden" name="as_sitesearch" :value="getDomain()">\n\t\t\t\t<input type="text" :placeholder="\'Search {0}@@search_site\' | trans(getDomain())" name="as_q" ref="input">\n\t\t\t\t<input type="submit">\n\t\t\t\t<icon type="search-thick"></icon>\n\t\t\t</form>\n\t\t</div>\n\t',onAfterMenuShow:function(){this.input.focus()},onClickMenu:function(){},getDomain:function(){return apower.getDomain()}}),w.registerComponent("language-win","win",{template:'\n\t\t<nav class="win language-win">\n\t\t\t<ul class="win-body">\n\t\t\t\t<li f-for="item of data" :class="item[0]"><a :href="getURL(item[1])">{{item[3]}}</a></li>\n\t\t\t</ul>\n\t\t</nav>\n\t',data:[["us","en","USA","English"],["fr","fr","France","Français"],["de","de","Deutschland","Deutsch"],["it","it","Italia","Italiano"],["se","sv","Sverige","Svenska"],["nl","nl","Nederland","Nederlands"],["es","es","España","Español"],["br","pt","Brasil","Português"],["fi","fi","Suomi","Suomi"],["no","no","Norge","Norsk"],["dk","da","Danmark","Dansk"],["tr","tr","Türkiye","Türkçe"],["pl","pl","Polska","Polski"],["jp","ja","日本","日本語"],["tw","tw","中國台灣","繁體中文"],["cn","zh","中国","简体中文"],["hu","hu","Magyarországon","Magyar"],["cz","cs","Čeština","Čeština"],["gr","el","Ελλάδα","ελληνικά"],["pt","pt","Portugal","Português"]],autoDestroy:!0,target:"body",onCreated:function(){this.apower=apower},getURL:function(t){return apower.getDomain(t)}}),w.registerComponent("language-select",{template:'\n\t\t<div class="language-select" @click="openWin">\n\t\t\t<div class="language-select-flag"></div>\n\t\t\t<div class="language-select-name"></div>\n\t\t\t<icon type="up"></icon>\n\t\t</div>\n\t',openWin:function(){w.newComponent("language-win").show()}}),w.registerComponent("paging",{pages:0,currentPage:1,template:'\n\t\t<div class="paging" f-show="pages > 1">\n\t\t\t<ul>\n\t\t\t\t<li class="paging-prev" f-enable="currentPage > 1" @click="selectPage(currentPage - 1)">Prev@@prev</li>\n\t\t\t\t<li f-for="index of getSelectablePages()" @click="selectPage(index)" :class.active="index === currentPage">{{index}}</li>\n\t\t\t\t<li class="paging-next" f-enable="currentPage < pages" @click="selectPage(currentPage + 1)">Next@@next</li>\n\t\t\t</ul>\n\t\t</div>\n\t',getSelectablePages:function(){var t=this.pages,e=this.currentPage,i=e-2,s=e+2;i<1&&(i=1,s=5),t<s&&(s=t,i=Math.max(1,t-4));for(var n=[],o=i;o<=s;o++)n.push(o);return n},selectPage:function(t){this.currentPage=t,this.trigger("select",t)}}),w.getDirective("tip").prototype.selector="[data-tip]",w.getDirective("tip").prototype.setTip=w.getDirective("tip").prototype.setValue,w.getDirective("tip").prototype.init=function(){this.value=this.value||this.el.attr("data-tip")||this.tip},w.getComponent("drop").prototype.selector=".drop, [data-drop]",w.getComponent("drop").prototype.init=function(){this.isOld&&(w.newComponent("icon",{type:"down",target:this.el}),this.label=this.el.find("label"),this.menu=w('<div class="drop-menu '+this.menuClass+'"></div>').appendTo(this.el),this.menu.prepend('<div class="ap-trangle"></div>'))},w.getComponent("drop-select").prototype.selector=".drop-select",w.getComponent("drop-select").prototype.init=w.getComponent("drop").prototype.init,w.getComponent("win").prototype.selector=".win",w.getComponent("win").prototype.ref={head:".win-head",body:".win-body",foot:".win-foot"},w.getComponent("win").prototype.init=function(){var t;this.el.parent().is(".win-mask")&&((t=this.el.parent()).after(this.el),t.remove())},w.registerDir("layer",{align:"t",gap:"0",open:!1,triggerType:"hover",layer:null,hasTransformAndTransition:!1,selector:"[data-layer]",trangle:!0,time:"",init:function(){var t,e,i=this.layer||this.el.attr("data-layer");"string"==typeof i&&(t=(i.startsWith(".")?"":".")+i,this.el[0],e=this.el.find(t)[0]||this.el.findNearestBehind(t)[0],this.layer=w(e)),this.hasTransformAndTransition=this.layer.css("transition").includes("transform")||"0"==this.layer.css("transform").select(/\d+/),!this.layer.find(".ap-trangle").length&&this.trangle&&this.layer.prepend('<div class="ap-trangle"></div>'),"hover"===this.triggerType?this.el.on("mouseenter",this.onMouseEnter,this):this.el.on(this.triggerType,this.onClick,this)},unbind:function(){this.el.off("mouseenter",this.onMouseEnter,this)},onMouseEnter:function(){this.showLayer()},onClick:function(){this.open?this.hideLayer():this.showLayer()},showLayer:function(){this.open||(this.hasTransformAndTransition&&(this.layer.css("transform","none"),this.layer.css("transition","none")),this.time=this.el.attr("data-time")||300,this.time?this.layer.fadeIn(parseInt(this.time)):this.layer.fadeIn(),this.layer.alignTo(this.el,this.align,this.gap),this.hasTransformAndTransition?(this.layer.css("transform",""),this.layer[0].offsetWidth,this.layer.css("transition",""),this.layer.css("transform","none")):(this.layer.hide(),this.layer.fadeIn(300)),this.el.addClass("active"),this.open=!0,w.onceAllLeave(this.el[0].contains(this.layer[0])?[this.el]:[this.el,this.layer],200,this.hideLayer,this))},hideLayer:function(){this.hasTransformAndTransition?this.layer.css("transform",""):this.layer.fadeOut(300),this.el.removeClass("active"),this.open=!1}}),apower.sharer=w.registerOnce({callbacks:{},data:{},getShareCount:function(a,t,e){var i;a=a||location.href.replace(/\?.+/,""),this.data[a]?t.call(e,this.data[a]):this.callbacks[a]?this.callbacks[a].push({handler:t,scope:e}):(this.callbacks[a]=[{handler:t,scope:e}],i=apower.isOurDomain?"":location.origin,w.ajax({type:"GET",url:i+"/admin-ajax?action=social_bookmark&url="+encodeURIComponent(location.href),dataType:"json",success:function(t){if(t.services){var e=t.services;for(var i in delete e.twitter,e.hatena=e["b.hatena.ne.jp"]||e.hatena,delete e["b.hatena.ne.jp"],e){var s=Number(e[i])||0;1e3<=s&&(s=Math.ceil(s/100)/10+"K"),e[i]=s}this.data[a]=e;for(i=0;i<this.callbacks[a].length;i++){var n=this.callbacks[a][i].handler,o=this.callbacks[a][i].scope;n.call(o,e)}}delete this.callbacks[a]}.bind(this)}))}}),w.registerDir("bind-share",{selector:"[data-share], .apower-counted-share",props:["share","share-url","share-title","align","gap","use-apower-qrcode"],share:"",shareUrl:"",shareTitle:"",align:"r",gap:10,init:function(){var s=new RegExp(Object.keys(this.links).join("|"));this.el.$on("click",function(t){var e,i=this.share;i||(e=w(t.target).closest("li")[0])&&(i=e.className.select(s,0)),i&&this.shareTo(i,this.shareUrl,this.shareTitle,"",e)},this),this.el.find("li").$on("mouseenter",function(t){var e=w(t.target).closest("li")[0];e&&(name=e.className.select(s,0)),name&&this.links[name].img&&this.shareTo(name,this.shareUrl,this.shareTitle,"",e)},this)},links:{google:{url:"https://plus.google.com/share?url={url}&t={title}",width:500,height:500},facebook:{url:"http://www.facebook.com/sharer/sharer.php?u={url}&title={title}",width:673,height:374},twitter:{url:"https://twitter.com/intent/tweet?url={url}&text={title}",width:548,height:430},pinterest:{url:"//assets.pinterest.com/js/pinmarklet.js",append:!0,width:600,height:400},hatena:{url:"http://b.hatena.ne.jp/entry/panel/?url={url}&btitle={title}",width:365,height:220},linkedin:{url:"https://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}",width:600,height:600},weixin:{img:"/do.php?action=qrcode&data={url}&size=5"},douban:{url:"http://www.douban.com/share/service?href={url}&name={title}&text={text}"},qzone:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&desc={text}&summary=&site="},weibo:{url:"http://service.weibo.com/share/share.php?url={url}&title={title}&searchPic=true"},tencent:{url:"http://share.v.t.qq.com/index.php?c=share&a=index&url={url}&title={title}"},youdao:{url:"http://note.youdao.com/memory/?url={url}&title={title}"}},getShareLink:function(t,e,i,s){var n=this.links[t].url||this.links[t].img;"weixin"===t&&(n=apower.getDomain("zh")+n);var o={url:encodeURIComponent(e),title:encodeURIComponent(i),text:encodeURIComponent(s)};return n=n.format(o)},onopenparams:null,shareTo:function(t,e,i,s,n){var o,a,r,l,c=w(n);e=e||location.href,i=i||c.data("share-title")||document.title,s=s||c.data("share-text")||"","function"==typeof this.links[t]?this.links[t](e,i,s,c):(o=this.getShareLink(t,e,i,s),this.links[t].append?w("body").append('<script src="'+o+'"><\/script>'):this.links[t].url?(a=this.links[t].width,r=this.links[t].height,l=a&&r?"width="+a+",height="+r:"",this.onopenparams&&(l=this.onopenparams(l,t)),window.open(o,"share-to-"+t,l)):c.dir("layer")||w.newCom("layer",c,{align:this.align,gap:this.gap,layer:w('<div class="ap-qrcode"><img src="'+o+'"></div>').appendTo("body")}).showLayer())}}),w.register("counted-share",{selector:".apower-counted-share",ref:{items:"li",shareSpans:".apower-share-label",countSpans:".apower-share-count",twitterSpan:".apower-share-twitter .apower-share-label"},props:["share-url","share-title"],shareURL:"",shareTitle:"",countWidth:46,darkBg:!1,canClose:!1,template:function(){var t='<li class="apower-share-pinterest"><i></i><span class="apower-share-label">Pin</span><span class="apower-share-count">-</span></li>';"ja"===apower.lang&&(t='<li class="apower-share-hatena"><i></i><span class="apower-share-label">{@@share}</span><span class="apower-share-count">-</span></li>');var e=this.canClose?'<div class="apower-share-exit"></div>':"";return'<ul class="apower-counted-share" data-share-url="'+this.shareURL+'" data-share-title="'+this.shareTitle+'"><li class="apower-share-google"><i></i><span class="apower-share-label">+1</span><span class="apower-share-count">-</span></li><li class="apower-share-facebook"><i></i><span class="apower-share-label">{@@share}</span><span class="apower-share-count">-</span></li><li class="apower-share-twitter"><i></i><span class="apower-share-label">{@@share}</span><span class="apower-share-count">-</span></li>'+t+'<li class="apower-share-linkedin"><i></i><span class="apower-share-label">{@@share}</span><span class="apower-share-count">-</span></li>'+e+"</ul>"},init:function(){this.darkBg&&this.el.addClass("apower-share-darkbg");var i=this.spanWidths=[];this.shareSpans.each(function(t,e){i[t]=w(e).getTextWidth()+10}),this.items.$on("mouseenter",this.onEnterItem,this),this.el.$on("mouseleave",this.onLeaveEl,this),this.el.find(".apower-share-exit").$on("click",function(){this.destroy(!0)},this),apower.sharer.getShareCount(this.shareUrl,function(t){for(var e in t){var i=t[e];this.el.find(".apower-share-"+e).find(".apower-share-count").text(i)}},this)},onEnterItem:function(t){var e,i=w(t.target).closest("li"),s=this.items.indexOf(i),n=this.shareSpans.eq(s),o=this.countSpans.eq(s),a=this.spanWidths[s],r=i.is(".apower-share-twitter"),l=this.countWidth,c=r?Math.max(0,a-l):a;c&&(e=l-c/(r?this.items.length-1:this.items.length-2),n.width(a),o.width(l),this.shareSpans.not(n).not(this.twitterSpan).width(0),this.countSpans.not(o).width(e),r||this.twitterSpan.width(l))},onLeaveEl:function(){var t=this.countWidth;this.shareSpans.width(0),this.countSpans.width(t),this.twitterSpan.width(t)}}),w.registerDir("fit",{selector:"[data-fit], .article iframe",props:["fit","fit-direction"],fit:"",fitDirection:"both",ow:0,oh:0,init:function(){w(window).$on("resize",w.lazyThrottle(this.doFit.bind(this,!1),500),this),"pc"===this.fit?w.onToggleMobile(this.cancelFit,this.reFit,this):"mobile"===this.fit&&w.onToggleMobile(this.reFit,this.cancelFit,this);for(var t=this.el.parent();t[0]&&t[0]!==document.documentElement;)t=t.parent();w.defer(this.doFit.bind(this,!0))},doFit:function(t){var e,i,s,n,o,a,r,l,c,h,d,u,p,f,m,v,g=this.el;g[0]!==(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement||document.msFullscreenElement)?(this.ow||(this.ow=g[0].offsetWidth),this.oh||(this.oh=g[0].offsetHeight),e=this.ow,i=this.oh,!e||!i||"pc"===this.fit&&window.innerWidth<=768||"mobile"===this.fit&&768<window.innerWidth||(n=(s=g.parent()).innerWidth(),o=s.innerHeight(),n&&o&&(a=g.cssNum("margin-left"),r=g.cssNum("margin-right"),l=parseFloat(g[0].style.marginTop),c=parseFloat(g[0].style.marginBottom),l<0&&c===l&&(o-=l+c),0===a&&0===r||"none"!==(h=g[0].style.display)&&(g[0].style.display="none",0!==a&&"auto"!==g.css("margin-left")&&(e+=a),0!==r&&"auto"!==g.css("margin-right")&&(e+=r),g[0].style.display=h),p=1,d="h"===this.fitDirection||"both"===this.fitDirection,u="v"===this.fitDirection||"both"===this.fitDirection,(d&&n<e||u&&o<i)&&(p=d&&n/e<=o/i||!u?n/e:o/i),f="scale("+p+")",m=((g.css("transform-origin")||"").split(" ")[1]||"").replace(/px/,""),m=Number(m)||0,v=function(){var t,e;1===p?(g.css("margin-bottom",""),g.css("margin-top",""),g.css("transform","")):(t=m*(p-1),e=(i-m)*(p-1),g.css("margin-bottom",e),g.css("margin-top",t),g.css("transform",f)),this.trigger("fit",g)}.bind(this),t?v():w.defer(v)))):g.css("transform","none")},reFit:function(){this.ow=this.el[0].offsetWidth,this.oh=this.el[0].offsetHeight,this.doFit()},cancelFit:function(){this.el.css("margin-bottom",0).css("transform","none")},onDestroy:function(){w(window).$off("resize",this.doFit,this)}}),w.registerDir("tab",{selector:"[data-tab]",props:["tab"],tab:"",tabEl:null,init:function(){var t;this.tab&&((t=w("."+this.tab)).length||(t=w("#"+this.tab)),t&&(this.tabEl=t,this.el.$on("click",this.onClick,this)),this.el.is(".active")&&!t.is(".active")&&w.defer(function(){this.el.click()},this))},onClick:function(){var t=this.el,e=this.tabEl,i=e.siblings(".active");e[0]!==i[0]&&(t.siblings().removeClass("active"),t.addClass("active"),i.removeClass("active"),e.addClass("active"),0<i.length&&void 0===this.hasTransition&&(this.hasTransition=0<Number(String(i.css("transition-duration")).slice(0,-1))),this.hasTransition&&(e.show(),i.$once("transitionend",this.hideLastTab,this),this.lastTabEl=i),i.$trigger("tabinactive",i),e.$trigger("tabactive",e))},hideLastTab:function(){this.lastTabEl&&!this.lastTabEl.is(".active")&&(this.lastTabEl.hide(),this.lastTabEl=null)}}),w.registerDir("tab-wrap",{selector:"[data-tab-wrap]",props:["tab-wrap"],tabWrap:"",btnEls:"",tabEls:null,init:function(){var t,e;this.tabWrap&&(this.btnEls=this.el.children(),this.btnEls.$on("click",this.onClick,this),(t=w("."+this.tabWrap)).length||(t=w("#"+this.tabWrap)),t&&(this.tabEls=t.children()),0<=(e=this.btnEls.filter(".active").index())&&!this.tabEls.eq(e).is(".active")&&w.defer(function(){this.btnEls.eq(e).click()},this))},onClick:function(t){var e=w(t.currentTarget),i=this.tabEls.eq(this.btnEls.indexOf(e)),s=i.siblings(".active");i[0]===s[0]||i.is(".active")||(this.btnEls.removeClass("active"),e.addClass("active"),s.removeClass("active"),i.addClass("active"),0<s.length&&void 0===this.hasTransition&&(this.hasTransition=0<Number(s.css("transition-duration").slice(0,-1))),this.hasTransition&&(i.show(),s.$once("transitionend",this.hideLastTab,this),this.lastTabEl=s),s.$trigger("tabinactive",s),i.$trigger("tabactive",i))},hideLastTab:function(){this.lastTabEl&&!this.lastTabEl.is(".active")&&(this.lastTabEl.hide(),this.lastTabEl=null)}}),w.register("switcher",{selector:".switcher",ref:{btnWrap:".switcher-btn",tabWrap:".switcher-tab",btns:".switcher-btn > li",tabs:".switcher-tab > li"},props:["mobile-collapse","interval","apply-class-to","toggle-active-to","mouseenter-collapse","no-height"],index:-1,interval:0,applyClassTo:"",applyClassToEl:null,toggleActiveTo:"",mobileCollapse:!1,mouseenterCollapse:!1,noHeight:!1,intervals:null,isMouseEntered:!1,direction:-1,init:function(){this.initBtnList(),this.initActive(),this.initIntervals(),this.initApplyClass(),this.resetInterval(),this.noHeight||this.fitTabHeight(),this.btns.$on("click",this.onClickBtn,this),this.tabs.$on("click",this.onClickTab,this),this.el.attr("data-slider-index",this.index)},initBtnList:function(){if(this.btns.length<this.tabs.length){for(var t=this.btns.length;t<this.tabs.length;t++){var e,i=this.tabs.eq(t)[0].className.replace(/\s*(?:-?active)\s*/g,"");i?(e=i+"-btn",this.btnWrap.append("<li class="+e+"></li>")):this.btnWrap.append("<li></li>")}this.applyRef("btns")}},initActive:function(){var t=this.tabs.filter(".active").index();-1===t&&(t=0),this.tabs.css("transition","none"),this.setIndex(t,!0),this.tabs.css("transition","")},initIntervals:function(){if(this.interval){this.intervals=[];for(var t=0;t<this.tabs.length;t++)this.intervals[t]=Number(this.tabs.eq(t).data("interval"))||this.interval;this.mouseenterCollapse||(this.el.$on("mouseenter",this.onMouseEnter,this),this.el.$on("mouseleave",this.onMouseLeave,this))}},onMouseEnter:function(){this.isMouseEntered=!0,this.el.addClass("slider-lock"),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},onMouseLeave:function(){this.isMouseEntered=!1,this.el.removeClass("slider-lock"),this.el.addClass("slider-before-unlock"),this.el[0].offsetWidth,this.el.removeClass("slider-before-unlock"),this.resetInterval()},initApplyClass:function(){this.applyClassTo&&(this.applyClassToEl=w(this.applyClassTo),this.applyClassToEl=this.applyClassToEl.length?this.applyClassToEl:null),this.handleClassApplying()},timeoutId:0,resetInterval:function(){this.interval&&(this.timeoutId&&clearTimeout(this.timeoutId),this.intervals&&(this.timeoutId=setTimeout(this.nextTab.bind(this),this.intervals[this.index])))},stopInterval:function(){clearTimeout(this.timeoutId),this.timeoutId=0},fitTabHeight:function(){var t=this.tabs.eq(this.index);0<t.length&&t[0].offsetHeight!==this.tabWrap.height()&&0<t[0].offsetHeight&&this.tabWrap.height(t[0].offsetHeight)},onClickBtn:function(t){var e=this.btns.indexOf(t.currentTarget);this.setIndex(e)},onClickTab:function(t){var e=w(t.currentTarget).index();this.setIndex(e)},nextTab:function(){var t=(this.index+1)%this.tabs.length;this.setIndex(t)},lastAppliedClass:"",setIndex:function(t,e){var i,s,n,o,a,r;t!==this.index&&(this.direction=t>this.index?1:-1,i=this.index,(s=this.tabs.eq(i)).$trigger("tabinactive",s),n=this.tabs.eq(t),o=this.tabs.length,r=((this.index=t)+1+o)%o,a=(t-1+o)%o,this.btns.removeClass("active").eq(t).addClass("active"),this.tabs.removeClass("last-active").removeClass("prev-active").removeClass("next-active"),!e&&this.el.hasClass("slider-pan")?(this.tabs.css("transition","none"),1===this.direction?this.tabs.eq(t).addClass("next-active"):this.tabs.eq(t).addClass("prev-active"),this.tabs.each(function(t,e){e.offsetWidth}),this.tabs.css("transition",""),this.tabs.eq(t).removeClass("prev-active").removeClass("next-active"),1===this.direction?this.tabs.eq(i).addClass("prev-active"):this.tabs.eq(i).addClass("next-active")):(2<this.tabs.length&&this.tabs.eq(a).addClass("prev-active"),this.tabs.eq(r).addClass("next-active")),this.tabs.eq(i).removeClass("active").addClass("last-active"),this.tabs.eq(t).addClass("active"),this.el.attr("data-slider-index",t),this.noHeight||this.fitTabHeight(),this.isMouseEntered||this.resetInterval(),this.onSetIndex(t),this.trigger("toggle",n),n.$trigger("tabactive",n),this.handleClassApplying(),this.handleActiveApplying(),a=(t-1+this.tabs.length)%this.tabs.length,r=(t+1)%this.tabs.length)},initActiveClass:function(){this.toggleActiveTo&&(this.toggleActiveToEl=w(this.toggleActiveTo),this.toggleActiveToEl=this.toggleActiveToEl.length?this.toggleActiveToEl:null),this.handleActiveApplying()},handleActiveApplying:function(){var t;this.toggleActiveToEl&&((t=this.toggleActiveToEl.children()).removeClass("active"),t.eq(this.index).addClass("active"))},handleClassApplying:function(){var t;this.applyClassToEl&&(this.lastAppliedClass&&(this.applyClassToEl.removeClass(this.lastAppliedClass),this.btnWrap.removeClass(this.lastAppliedClass),this.lastAppliedClass=""),(t=this.tabs.eq(this.index).attr("data-class-to-apply"))||(t=this.tabs[this.index].className.replace(/\s*(?:\w+-)?active/g,"").trim())&&(t+="-style"),t&&(this.lastAppliedClass=t,this.applyClassToEl.addClass(t),this.btnWrap.addClass(this.lastAppliedClass)))},onSetIndex:function(){}}),w.register("slider","switcher",{selector:".slider",props:["no-pan","slider-group"],noPan:!1,sliderGroup:!1,ref:{bodyWrap:".slider-body",btnWrap:".slider-btn",tabWrap:".slider-tab",btns:".slider-btn > li",tabs:".slider-tab > li",prevEl:".slider-prev",nextEl:".slider-next",leftEl:".slider-img-left",rightEl:".slider-img-right"},init:function(){this.sliderGroup&&this.initSliderGroup(),this.initCollapseTabs(),this.callSuper("switcher"),this.initActiveClass(),this.handlePanStyle(),this.prevEl.$on("click",this.prevTab,this),this.nextEl.$on("click",this.nextTab,this),this.leftEl.$on("click",this.prevTab,this),this.rightEl.$on("click",this.nextTab,this),this.tabWrap.onPan(this.onPan.bind(this));var t=this.tabWrap.dir("fit");t&&(t.fitDirection="h")},handlePanStyle:function(){this.el.hasClass("slider-pan")||!this.btns.length||this.noPan||w.defer(function(){w.onToggleMobile(function(){this.el.addClass("slider-pan")},function(){this.el.removeClass("slider-pan")},this)},this)},initCollapseTabs:function(){w(window).width()<768&&this.mobileCollapse&&(this.tabs.each(function(t,e){var i=(e=w(e)).children(":last");e.after(w("<li></li>").append(i))}),this.applyRef())},initSliderGroup:function(){var t=this.tabs.children(),e=t.length,i=t.width(),s=this.el.width();if(!(i*e<=s)){for(var n=Math.floor(s/i),o=Math.ceil((e-n)/n),a=0;a<o;a++){this.tabWrap.append("<li></li>");for(var r=0;r<e-n*(a+1);r++){var l=t.eq(n*(a+1)+r);this.tabWrap.find(">li:last-child").append(l)}}this.applyRef()}},prevTab:function(){var t=(this.index-1+this.tabs.length)%this.tabs.length;this.setIndex(t)},onPan:function(t){"l"===t?this.prevTab():"r"===t&&this.nextTab()}}),w.register("photo-slider","slider",{selector:".photo-slider",maxTopMoved:500,minScale:.33,minOpacity:.7,angleAvailable:260,useShade:!0,activeElBottomAlign:!0,activeElTop:0,useRoundLayout:!0,init:function(){this.useShade&&(this.tabs.each(function(t,e){w(e).append('<div class="slider-shade"></div>')}),this.shades=this.el.find(".slider-shade")),this.initBtnList(),this.initActive(),this.resetPosition(),this.prevEl.$on("click",this.prevTab,this),this.nextEl.$on("click",this.nextTab,this),this.tabWrap.onPan(this.onPan.bind(this)),this.tabs.$on("click",this.onClickTab,this),w(window).$on("resize",this.resetPosition,this)},resetPosition:function(){var t=Math.PI/180,e=this.tabs.length,i=this.index,s=this.angleAvailable/(e-2),n=(360-this.angleAvailable)/2*t,o=this.el[0].offsetWidth,a=this.tabs[0].offsetWidth;this.tabs.eq(i).css("z-index",1e3).css("transform","translateY({0}px)".format(this.activeElTop)).css("opacity",""),this.useShade&&this.shades.eq(i).css("opacity",0);for(var r=1;r<e;r++){var l=(i+r)%e,c=this.tabs.eq(l),h=n+(r-1)*s*t,d=this.useRoundLayout?1:Math.cos(4*h)/15+14/15,u=(1-this.minScale)*(1+Math.cos(h))/2+this.minScale,p=-this.maxTopMoved/2*((this.activeElBottomAlign?Math.cos(n):1)-Math.cos(h)*d),f=(o-a)*Math.sin(h)*.5*d,m=(1-this.minOpacity)*(1+Math.cos(h))/2+this.minOpacity;c.css("transform","translate({left}px, {top}px) scale({scale})".format({left:f,top:p,scale:u})),c.css("z-index",Math.floor(1e3*u)),this.useShade?this.shades.eq(l).css("opacity",1-m):c.css("opacity",m)}},onSetIndex:function(){this.resetPosition()},onClickTab:function(t){var e;768<window.innerWidth&&(e=w(t.target).closest("li").index(),this.setIndex(e))}}),w.register("rating",{selector:".rating",template:'\t\t<div class="rating" data-rating="4.5">\t\t\t<div class="rating-count">{@@reviews} ({{this.reviewCount}})</div>\t\t\t<div class="rating-stars">\t\t\t\t<div class="rating-background-stars">\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t</div>\t\t\t\t<div class="rating-current-stars">\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t\t<icon type="star"></icon>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t',ref:{starWrap:".rating-stars",backgroundEl:".rating-background-stars",currentEl:".rating-current-stars",textEl:".rating-text",valueEl:'[itemprop="ratingValue"]',countEl:'[itemprop="ratingCount"]',thanksEl:".rating-thanks"},rating:0,reviewCount:0,posturl:"",selectable:!1,size:"normal",autoSet:!1,init:function(){this.selectable&&this.el.addClass("selectable"),"small"===this.size&&this.el.addClass("rating-sml"),this.ratingLabels=h("rating_labels").split(";"),this.isOld&&(this.selectable=this.el.hasClass("selectable"),this.posturl=this.posturl||this.el.closest("[data-posturl]").data("posturl"),this.rating||(this.rating=Number(this.valueEl.text())),this.starWrap.append('<div class="rating-background-stars"><i></i><i></i><i></i><i></i><i></i></div><div class="rating-current-stars"><i class="active"></i><i class="active"></i><i class="active"></i><i class="active"></i><i class="active"></i></div>'),this.applyRef()),this.setValue(this.rating);var t=this.starWrap.find(".icon, i");t.$on("mouseenter",this.onEnterStar,this),t.$on("mouseleave",this.onLeaveStar,this),t.$on("click",this.onClickStar,this),this.initArticleRating()},initArticleRating:function(){this.posturl&&this.on("select",function(t){this.el.removeClass("selectable").attr("disabled","disabled"),this.selectable=!1,w.ajax({type:"POST",url:w.nocache(this.posturl),dataType:"json",data:{rating:t},success:function(t){1==t.state&&(this.countEl.text((parseInt(this.countEl.text())||0)+1),this.thanksEl.show())}.bind(this)})},this)},setValue:function(t){t=Number(t);var e=this.rating=t,i=t-Math.floor(t),s=Math.floor(t)+.5;0<i&&(e=s+22*(t-s)/32),this.currentEl.width(20*e+"%"),this.textEl.text(this.ratingLabels[Math.floor(t-1e-4)]),this.valueEl.text(t)},onEnterStar:function(t){var e,i;this.selectable&&(e=w(t.currentTarget).index(),i=this.ratingLabels[e],this.textEl.text(i),this.backgroundEl.find("i, .icon").slice(0,e+1).addClass("active"))},onLeaveStar:function(){this.selectable&&(this.textEl.text(this.ratingLabels[Math.floor(this.rating-1e-4)]),this.backgroundEl.find("i, .icon").removeClass("active"))},onClickStar:function(t){var e,i;this.selectable&&(i=(e=w(t.currentTarget).index())+1,this.autoSet&&this.setValue(i),this.trigger("select",e+1))}}),w.register("viewer","win",{selector:".viewer",template:'<div class="viewer"><div class="viewer-body"></div></div>',target:"body",mask:!0,ref:{body:".viewer-body"},onReady:function(){this.maskEl.addClass("video-viewer-mask")},show:function(){this.el.show();var t=this.width,e=this.height,i=w(window).width()-30,s=w(window).height()-30;i<t&&(e=e*i/t,t=i),s<e&&(t=t*s/e,e=s),this.el.width(t).height(e),this.body.attr("width",t).attr("height",e),this.body.width(t).height(e),this.el.addClass("active"),w("body").addClass("body-fixed"),this.trigger("show")},hide:function(){this.el.removeClass("active"),w("body").removeClass("body-fixed"),this.trigger("hide"),setTimeout(function(){this.destroy()}.bind(this),300)}}),w.register("video-viewer","viewer",{video:"",poster:"",width:640,height:360,useIframe:!1,template:function(){return this.useIframe?'<div class="viewer video-viewer"><iframe class="viewer-body" src="{video}" allowfullscreen></iframe></div>'.format(this):'<div class="viewer video-viewer"><video class="viewer-body" autoplay controls poster="{poster}" width="100%"><source src="{video}" type="video/mp4"></source></video></div>'.format(this)}}),w.registerDir("open-video",{selector:"[data-video], .fancybox-media",ref:{orgVideo:"video"},props:["video","video-width","video-height"],videoWidth:640,videoHeight:360,video:"",skipClass:"",init:function(){this.video=this.video||this.el.attr("href"),/youtube\.com\/watch\?v=[\w-]+/.test(this.video)&&(this.video=this.video.replace(/watch\?v=([\w-]+)(&?)/,function(t,e,i){return"embed/"+e+(i?"?":"")})),/youtube\.com/.test(this.video)&&(this.video.includes("?")?this.video.includes("autoplay=1")||(this.video+="&autoplay=1"):this.video+="?autoplay=1"),this.el.$on("click",this.onClickEl,this)},onClickEl:function(t){var e,i;t.preventDefault(),w(window).width()<=768?open(this.video):this.skipClass&&w(t.target).closest(this.skipClass).length||(i=!1,(e=this.el.find("video")).length?(this.video=this.video||e[0].currentSrc,this.poster=e[0].poster||"",e.trigger("pause")):this.video.startsWith("http")&&(i=!0),w.newCom("video-viewer",{video:this.video,poster:this.poster,width:this.videoWidth,height:this.videoHeight,useIframe:i}).show())}}),w.register("report-video-win","win",{template:function(){return'<div class="win report-win"><div class="win-head">'+(this.title||"{@@report}")+'</div><div class="win-body"><label class="report-win-label"><span>{@@email}:</span><input type="email" name="email" required pattern="^[\\w-]+(?:\\.[\\w-]+)*@[\\w-]+(?:\\.[\\w-]+)+$"></label><label class="report-win-label"><span>{@@reason}:</span><input type="text" name="reason" required></label></div><div class="win-foot"><button class="submit" type="primary">{@@submit}</button></div></div>'},id:"",email:"",title:"",target:"body",autoDestroy:!0,notUseJson:!1,ref:{emailEl:"[name=email]",submitEl:".submit"},init:function(){this.email&&this.emailEl.val(this.email),this.submitEl.$on("click",this.onSubmit,this)},getURL:function(){return w.nocache(apower.getWPPath()+"/wp-admin/admin-ajax.php?action=videograbber_video&type=report_video")},getPost:function(){return this.el.formObj({post_id:this.id})},onSubmit:function(){var t=this.getURL(),e=this.notUseJson?this.getPost():JSON.stringify(this.getPost());this.el.checkValidity()&&(w.ajax({type:"POST",url:w.nocache(t),data:e,dataType:"json",success:this.onSubmitted.bind(this),error:this.onSubmitError.bind(this)}),this.submitEl.addClass("btn-loading"))},onSubmitted:function(t){this.submitEl.removeClass("btn-loading"),t&&1==t.state?(w.msg.success(h("thanks_report")),this.hide()):w.msg.error(h("submit_failed"))},onSubmitError:function(){this.submitEl.removeClass("btn-loading"),w.msg.error(h("submit_failed"))}}),w.registerDir("report-video",{selector:"[data-report-video]",props:["id"],init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(){w.newCom("report-video-win",null,{id:this.id}).show()}}),w.register("image-viewer","viewer",{width:80,height:80,image:"",template:'<div class="viewer image-viewer"><img class="viewer-body"></div>',props:["image"],init:function(){this.callSuper("viewer"),w.preloadImage(this.image,function(t){t?(this.body.attr("src",this.image),this.width=t.naturalWidth,this.height=t.naturalHeight,this.show()):this.destroy()},this)}}),w.registerDir("open-image",{selector:"[data-image], .fancybox",props:["image"],init:function(){this.image=this.image||this.el.attr("href"),this.el.$on("click",this.onClickEl,this)},onClickEl:function(t){t.preventDefault(),w.newCom("image-viewer",{image:this.image}).show()}}),w.register("share-win","win",{props:["share-url"],autoDestroy:!0,template:function(){var t;return t="zh"===apower.lang?'<li title="分享到豆瓣" class="douban"></li><li title="分享到QQ空间" class="qzone"></li><li title="分享到新浪微博" class="weibo"></li><li title="复制到浏览器" class="copy-link" data-copy="'+location.href+'"></li>':'<li class="facebook"></li><li class="twitter"></li><li class="google"></li><li class="'+("ja"===apower.lang?"hatena":"pinterest")+'"></li>',apower.trans('<div class="win share-win"><h2 class="win-head">{@@share}</h2><ul class="win-body" data-share>{0}</ul></div>').format(t)},init:function(){this.callSuper("win")}}),w.registerDir("open-share",{selector:"[data-open-share]",props:["share-url"],init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(){w.newCom("share-win",{shareURL:this.shareURL}).show()}}),w.register("fixed-share",{template:function(){var t=w.getDirective("bind-share").prototype.links,e=this.hasWeixin&&t.weixin&&t.weixin.img;return"zh"===apower.lang?'<div class="counted-share-vertical" data-share><ul>'+(e?'<li class="share-vertical-weixin"><div></div></li>':"")+'<li class="share-vertical-douban"><div></div></li><li class="share-vertical-qzone"><div></div></li><li class="share-vertical-weibo"><div></div></li><li class="share-vertical-tencent"><div></div></li><li class="share-vertical-youdao"><div></div></li></ul><div class="share-vertical-hidebar"></div></div>':'<div class="counted-share-vertical" data-share><ul><li class="share-vertical-google"><div>-</div></li><li class="share-vertical-facebook"><div>-</div></li><li class="share-vertical-twitter"><div>{@@share}</div></li><li class="share-vertical-'+("ja"===apower.lang?"hatena":"pinterest")+'"><div>-</div></li><li class="share-vertical-linkedin"><div>-</div></li></ul><div class="share-vertical-hidebar"></div></div>'},target:"body",props:["share-url"],shareURL:"",useShareCount:!0,hasWeixin:!1,init:function(){this.el.find(".share-vertical-hidebar").$on("click",function(t){this.el.toggleClass("collapsed")},this),this.useShareCount&&"zh"!==apower.lang&&apower.sharer.getShareCount(this.shareURL,function(t){for(var e in t){var i=t[e],s=this.el.find(".share-vertical-"+e+" div");0<i?s.text(i):(s.text(""),this.el.find(".share-vertical-"+e).css("background-position","center"))}},this)}}),w.register("comment-form",{selector:".comment-form",ref:{inputs:"input, textarea",submitEl:".submit",cancelEl:".cancel-reply",parentIdEl:'[name="comment_parent"]',authorEl:"[name=author]",emailEl:"[name=email]",contentEl:"[name=comment]"},init:function(){this.leaveCommentEl=this.el.closest(".leave-comment"),this.commentEl=this.leaveCommentEl.siblings(".comment"),this.initForm(),this.initValue()},initForm:function(){this.inputs.$on("input",function(t){t.target.value?w(t.target).addClass("touched"):w(t.target).removeClass("touched")}),this.inputs.$on("focus",function(t){w(t.target).parent().addClass("active")}),this.inputs.$on("blur",function(t){var e=w(t.target);e.val()||e.parent().removeClass("active")}),this.contentEl.$on("keydown",function(t){13===t.keyCode&&(t.preventDefault(),this.el.checkValidity()&&this.doSubmit())},this),this.submitEl.$on("click",function(t){t.preventDefault(),this.el.checkValidity()&&this.doSubmit()},this),this.cancelEl.$on("click",function(t){t.preventDefault(),this.inputs.blur().removeClass("touched"),this.el.appendTo(this.leaveCommentEl),this.parentIdEl.val("0"),this.commentEl.find(".comment-replying").removeClass("comment-replying")},this)},initValue:function(){"Anonymous"===this.authorEl.val()&&this.authorEl.val(""),"anonymous@apowersoft.com"===this.emailEl.val()&&this.emailEl.val(""),this.contentEl.val("")},setParentId:function(t){this.parentIdEl.val(t)},doSubmit:function(){var t=this.el.attr("action");w.ajax({type:"POST",url:w.nocache(t),data:this.el.formData(),processData:!1,contentType:!1,dataType:"text",success:this.onSubmitted.bind(this),error:this.onSubmitError.bind(this)}),this.contentEl.blur().attr("disabled","disabled"),this.submitEl.addClass("btn-loading")},onSubmitted:function(i){if(this.contentEl.blur().removeAttr("disabled"),this.submitEl.removeClass("btn-loading"),"string"==typeof i){var t=i.select(/^\s*<p>(.+?)<\/p>\s*$/,1);if(t)return void w.msg.alert(t);try{i=JSON.parse(i)}catch(t){i={}}}var e=this.authorEl.val(),s=this.contentEl.val(),n=(n=this.el.closest(".comment-item")).length?n:null;i.comment_author=i.comment_author||e||h("anonymous"),i.comment_content=i.comment_content||s,i.comment_date=i.comment_date||w.formatDate(new Date),w(".comment").each(function(t,e){w(e).com().onNewComment(i,n)}),this.initValue(),this.inputs.removeClass("touched").parent().removeClass("active"),this.trigger("submitted")},onSubmitError:function(t){this.contentEl.blur().removeAttr("disabled"),this.submitEl.removeClass("btn-loading");var e=(t.responseText||"").select(/<p>(.+?)<\/p>/,1);w.msg.alert(e||h("submit_failed"))},commentNumberPlus:function(){var t=Number(w(".comment-number span").eq(0).text())||0;t++,w(".comment-count").text("("+t+")"),w(".comment-number span").text(t)}}),w.register("comment",{selector:".comment",ref:{inputs:"input",listEl:" > ul",loadMoreEl:".load-more"},data:{},props:["use-ago-time"],page:0,paging:5,pageCount:1,pagingMode:!1,useAgoTime:!1,init:function(){this.loadMoreMode=!!this.loadMoreEl.length,this.form=this.el.siblings(".leave-comment").find(".comment-form"),this.pagingMode=!this.el.closest(".comment-win").length&&!this.loadMoreMode,this.initPermlink(),this.initPageInfo(),this.useAgoTime&&this.initPublishedTime(),this.pagingMode?this.initPaging():this.loadMoreMode?this.initLoadMore():this.initWin(),this.el.$on("click",this.onClickLike,this),this.el.$on("click",this.onClickReply,this)},initPermlink:function(){var t;/comment=\d+/i.test(location.search)&&(t=location.search.match(/comment=(\d+)/i)[1],w("#comment-"+t).length&&(location.hash="#comment-"+t))},onClickLike:function(t){var e,i=w(t.target).closest(".comment-like, .comment-dislike"),s=i.is(".comment-like"),n=i.parent().children(".comment-like, .comment-dislike");i.length&&(n.addClass("comment-liked"),e={comment_ID:i.closest("[data-id]").data("id"),vote_type:s?"1":"-1",action:"wc_vote_via_ajax"},w.ajax({type:"POST",url:w.nocache(apower.getWPPath()+"/wp-admin/admin-ajax.php"),data:e,dataType:"json",success:function(t){1==t.code?i.text((Number(i.text())||0)+1):-1==t.code&&n.removeClass("comment-liked")}}))},onClickReply:function(t){var e,i,s,n=w(t.target).closest(".comment-reply");n.length&&(e=this.form,i=n.closest("[data-id]").data("id"),s=n.closest(".comment-self"),e.com().setParentId(i),768<w(window).width()?(n.closest(".comment-actions").before(e),this.el.find(".comment-replying").removeClass("comment-replying"),s.addClass("comment-replying")):w.newCom("mobile-comment-form").show())},initPageInfo:function(){this.pagingWrap=this.el.find(".paging"),this.prevEl=this.pagingWrap.find(".prev"),this.nextEl=this.pagingWrap.find(".next"),this.page=Math.max(parseInt(this.pagingWrap.find("li.active").text())-1||0,0),this.pageCount=parseInt(this.pagingWrap.data("page-count"))||1,this.listEl.length||(this.listEl=w('<ul id="comment-list"></ul>'),this.el.find("h2").after(this.listEl)),this.data[this.page]=this.listEl.children()},initPaging:function(){this.loadEl=w('<div class="loading" hidden><div><div></div></div></div>').appendTo(this.el),this.pagingWrap.$on("click",function(t){var e,i=w(t.target).closest("li");i.length&&(e=0,e=i.is(".prev")?this.page-1:i.is(".next")?this.page+1:Number(i.text())-1,this.loadPageData(e))},this)},initPublishedTime:function(){this.el.find(".comment-time span").each(function(t,e){w(e).text(apower.getAgoTypeTime(w(e).text()))}.bind(this))},initWin:function(){this.win=this.el.closest(".comment-win").com(),this.win.on("ready",function(){this.win.maskEl.addClass("comment-win-mask"),this.loadEl=w('<div class="loading-more"><div></div></div>').appendTo(this.win.body),0!==this.page&&this.loadPageData(0),this.win.body.$on("scroll",this.onBodyScroll,this)},this)},initLoadMore:function(){1==this.pageCount&&this.loadMoreEl.hide(),this.loadMoreEl.find("> div").$on("click",this.onClickLoadMore,this)},onClickLoadMore:function(){this.loadPageData(this.page+1)},onBodyScroll:function(){var t=this.win.body;this.page<this.pageCount-1&&!this.loadEl.hasClass("active")&&t[0].scrollTop>=t[0].scrollHeight-t[0].clientHeight&&this.loadPageData(this.page+1)},loadPageData:function(e){var i;this.data[e]?(this.page=e,this.onLoadData(this.data[e])):(i={post_id:w('[name="comment_post_ID"]').val(),action:"wc_load_more_comments",offset:e*this.paging,per_page:this.paging},this.inputs.map(function(t,e){i[w(e).attr("name")]=w(e).val()}),this.pagingMode?this.loadEl.show():this.loadMoreMode?this.loadMoreEl.addClass("active"):this.loadEl.addClass("active"),w.ajax({type:"POST",url:apower.getWPPath()+"/wp-admin/admin-ajax.php",data:i,dataType:"json",success:function(t){this.pagingMode?this.loadEl.hide():this.loadMoreMode?(this.loadMoreEl.removeClass("active"),this.loadMoreEl.com()&&this.loadMoreEl.com().stop(),(!t.comments||t.comments.length<this.paging)&&this.loadMoreEl.hide()):this.loadEl.removeClass("active"),this.page=e,this.pageCount=Math.ceil(t.parent_count/this.paging)||this.pageCount,this.data[e]=t.comments,this.onLoadData(t.comments)}.bind(this)}))},generateHTML:function(t){if(!t)return"";for(var e=[],i=0;i<t.length;i++){var s=t[i],n=apower.user&&apower.user.getId()==s.comment_uid?apower.user.getAvatar():s.avatar||s.avatar_url,o=n?" has-portrait":"",a=this.useAgoTime?apower.getAgoTypeTime(s.comment_date||s.comment_time):s.comment_date,r=('<li class="comment-item" data-id="{comment_ID}" id="comment-{comment_ID}"><div class="comment-self" itemprop="comment" itemscope itemtype="http://schema.org/Comment"><div class="comment-portrait'+o+'"><img src="'+n+'"></div><div class="comment-author" itemprop="author">'+(s.comment_author||s.nickname)+'</div><a class="comment-time" itemprop="datePublished" href="?comment={comment_ID}">'+a+'</a><div class="comment-text" itemprop="text">{comment_content}</div><div class="comment-actions"><div class="comment-like" itemprop="upvoteCount">{like}</div><div class="comment-dislike" itemprop="downvoteCount">{dislike}</div><div class="comment-reply-count">{child_count}</div><div class="comment-reply">'+h("reply")+'</div></div></div><ul class="comment-reply-items">{child}</ul></li>').format(s).format({child:this.generateHTML(s._child),child_count:s._child?s._child.length:0});e.push(r)}return e.join("")},onLoadData:function(t){if(this.el.find(".cancel-reply").click(),this.pagingMode){this.listEl.empty();var e=this.page,i=this.paging,s=this.pageCount,n=Math.max(0,e-Math.floor((i-1)/2)),o=Math.min(s,n+i);o===s&&(n=Math.max(0,o-i)),this.pagingWrap.find("li").not(".prev, .next").remove();for(var a=n;a<o;a++){var r=w("<li>"+(a+1)+"</li>");a===e&&r.addClass("active"),this.nextEl.before(r)}0<e?this.prevEl.removeAttr("disabled"):this.prevEl.attr("disabled","disabled"),e<s-1?this.nextEl.removeAttr("disabled"):this.nextEl.attr("disabled","disabled")}Array.isArray(t)?w(this.generateHTML(t)).appendTo(this.listEl):t.clone().appendTo(this.listEl)},onNewComment:function(t,e){var i="video"!==apower.pageType,s="";i&&(s='<div class="comment-await">'+h("success_to_review")+"</div>");var n="";t.comment_id?n=apower.trans('<div class="comment-actions"><div class="comment-like" itemprop="upvoteCount">0</div><div class="comment-dislike" itemprop="downvoteCount">0</div><div class="comment-reply-count">0</div><div class="comment-reply">{@@reply}</div></div>'):t.comment_id=Date.now();var o=this.useAgoTime?apower.getAgoTypeTime(t.comment_date||t.comment_time):t.comment_date,a=apower.user?apower.user.getAvatar():"",r='<li class="comment-item" data-id="{comment_id}" id="comment-{comment_id}"><div class="comment-self" itemprop="comment" itemscope itemtype="http://schema.org/Comment"><div class="comment-portrait'+(a?" has-portrait":"")+'"><img src="'+a+'"></div><div class="comment-info"><div class="comment-author" itemprop="author">{comment_author}</div><a class="comment-time" itemprop="datePublished">'+o+'</a></div><div class="comment-text" itemprop="text">{comment_content}</div>'+s+n+"</div></li>";this.el.removeClass("no-comment");var l,c=w(r.format(t));e&&!i?((l=e.find("> .comment-reply-items")).length||(l=w('<ul class="comment-reply-items"></ul>').appendTo(e)),l.prepend(c)):this.listEl.prepend(c),this.data[0]&&this.data[0].add&&(this.data[0]=c.add(this.data[0]))}}),apower.getAgoTypeTime=function(t){var e=new Date,i=e-new Date(t)+60*e.getTimezoneOffset()*1e3,s={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},n="second",o=1;for(var a in s){var r=i/s[a];if(!(1<r))break;n=a,o=Math.floor(r)}var l=(1<o?"some_{0}s_ago":"one_{0}_ago").format(n);return apower.tr(l,o)},w.registerDir("open-comment",{selector:"[data-open-comment], .feature-comment",init:function(){this.el.$on("click",function(){this.showCommentWin()},this)},showCommentWin:function(){var e,t,i;w(".comment-win").length?w(".comment-win").com().show():((e=w.newCom("win")).maskEl.addClass("comment-win-mask"),e.el.addClass("comment-win"),w(".comment"),e.body.append(w(".leave-comment").clone()),e.body.append(w(".comment").clone()),e.body.append(w(".paging").clone()),e.body.find(".comment h2").appendTo(e.head),e.body.find(".comment .comment-form").appendTo(e.body.find(".leave-comment")),e.body.find(".comment .comment-replying").removeClass("comment-replying"),t=e.el.find(".comment-number"),i=e.el.find(".win-body"),t.$on("click",function(){var t=e.el.find(".comment").position().top-150||0;i[0].scrollTo(0,t)},this),e.body.applyCom(),e.show())}}),w.register("mobile-comment-form",{ref:{inputs:"input, textarea",submitEl:".submit",cancelEl:".cancel",loadEl:".loading"},template:'<form class="mobile-comment-form" action="" method="post"><div class="wrapper"><div class="title">{@@comments}</div><textarea placeholder="{@@write_your_review}" name="comment" required maxlength="1024"></textarea><input type="hidden" name="author" value="Anonymous"><input type="hidden" name="email" value="anonymous@apowersoft.com"><div class="win-foot"><button class="submit">{@@submit}</button><button class="cancel">{@@cancel}</button></div></div><div class="loading" hidden><div><div></div></div></div></form>',target:"body",init:function(){this.oldForm=w(".comment-form").eq(0),this.inputs.$on("input",function(t){""!==w(t.target).val()?this.submitEl.addClass("active"):this.submitEl.removeClass("active")},this),this.cancelEl.$on("click",function(t){t.preventDefault(),this.destroy()},this),this.loadEl.$on("click",function(){this.destroy()},this),this.el.$on("submit",function(t){t.preventDefault(),this.loadEl.show(),this.oldForm.com().inputs.each(function(t,e){w(e).val(this.el.find("[name="+e.name+"]").val())}.bind(this)),this.oldForm.com().doSubmit(),this.oldForm.com().on("submitted",this.onSubmitted,this)},this)},onSubmitted:function(){this.destroy()},show:function(){this.el.show().find("textarea").focus()},onDestroy:function(){this.oldForm.com().off("submitted",this.onSubmitted,this)}}),apower.scroller=w.registerOnce(document,{downFns:[],upFns:[],lastScrollTop:0,init:function(){this.lastScrollTop=w("html").scrollTop()||w("body").scrollTop(),this.el.$on("scroll",this.onDomScroll,this),setTimeout(function(){this.trigger("scroll",this.lastScrollTop),100<this.lastScrollTop&&this.trigger("down",this.lastScrollTop)}.bind(this),0),this.onDomScroll()},onDomScroll:function(){var t=w("html").scrollTop()||w("body").scrollTop(),e=(w(window).width(),t<this.lastScrollTop?"up":"down");"up"==e?this.trigger("up",t):100<=t&&this.trigger("down",t),this.trigger("scroll",t,e),this.lastScrollTop=t}}),w.register("mobile-review",{template:'<div class="mobile-review"><div class="mobile-review-wrapper"><div class="mobile-comment-btn">{@@comments}</div><div class="mobile-review-btns"><div class="mobile-rating-btn"></div><div class="mobile-share-btn" data-open-share></div><div class="mobile-comment-count"></div></div></div></div>',target:"body",ref:{countEl:".mobile-comment-count",commentBtn:".mobile-comment-btn"},init:function(){var t=w(".comment-win");this.countEl.text(w(".comment-count").eq(0).text()),this.commentBtn.$on("click",function(t){w.newCom("mobile-comment-form").show()}),this.countEl.$on("click",function(t){w.com("open-comment").prototype.showCommentWin(),w(".comment-win-mask").css("bottom",this.el[0].offsetHeight)},this),apower.scroller.on("down",function(){t.length&&t.is(":visible")||this.el.hide()},this),apower.scroller.on("up",function(){this.el.show()},this)}}),w.register("review-form","win",{template:'<form class="win review-form"><h2 class="win-head">{@@write_your_review}</h2><div class="win-body"><div class="rating selectable" data-selectable data-auto-set><div class="rating-stars"></div><div class="rating-text"></div></div><div class="title"><input type="text" placeholder="{@@title}" name="title" maxlength="100"></div><div class="text"><textarea placeholder="{@@write_your_review}" name="review" maxlength="1024"></textarea></div><div class="name"><input type="text" placeholder="{@@name}" name="name" maxlength="100"></div><div class="email"><input type="email" placeholder="{@@email}" name="email" maxlength="100" pattern="^[\\w-]+(?:\\.[\\w-]+)*@[\\w-]+(?:\\.[\\w-]+)+$"><div class="invalid-text">{@@valid_email}</div></div></div><div class="win-foot"><button class="cancel">{@@cancel}</button><button class="submit" type="primary">{@@submit}</button></div></div>',ref:{inputs:"input, textarea",ratingEl:".rating",submitEl:".submit",cancelEl:".cancel"},autoDestroy:!0,rating:5,init:function(){this.callSuper("win"),this.ratingEl.com().setValue(this.rating),this.inputs.$on("input",function(t){t.target.value?w(t.target).addClass("touched"):w(t.target).removeClass("touched")}),this.inputs.$on("focus",function(t){w(t.target).parent().addClass("active")}),this.inputs.$on("blur",function(t){var e=w(t.target);e.val()||e.parent().removeClass("active")}),this.submitEl.$on("click",this.onSubmit,this),this.cancelEl.$on("click",this.onClickCancel,this)},onSubmit:function(t){var e,i;t.preventDefault(),this.el.checkValidity()&&(e=this.ratingEl.com().rating,i={related_id:apower.productId,type:apower.productType,action:"review",score:e,language:apower.lang,nocache:"1"},w.extend(i,this.el.formObj()),this.showLoading(),w.ajax({url:w.nocache("https://support.apowersoft.com/Api/review"),data:i,dataType:"jsonp",success:function(t){this.hideLoading(),"exist"===t.status?(w.msg.alert(h("already_reviewed")),this.hide()):"failed"===t.status?w.msg.alert(h("failed_to_review")):this.onReviewSuccess(t,e)}.bind(this)}))},onClickCancel:function(t){t.preventDefault(),this.hide()},onReviewSuccess:function(t,e){this.hide(),apower.reviewChecker.setAsReviewed();var i={id:t.id,score:e,add_time:w.formatDate(new Date)};w.extend(i,this.el.formObj()),(i.title||i.review)&&w(".review-win").com().onNewReview(i)}}),w.registerDir("open-review-form",{selector:"[data-open-review-form]",init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(){w.newCom("review-form").show();var t=w(".review").com();t&&t.hide()}}),w.registerDir("set-review-rating",{selector:".rating",init:function(){this.el.find(".rating-count").length&&this.el.com().on("select",this.onSelect,this)},onSelect:function(t){w.newCom("review-form",{rating:t}).show();var e=w(".review").com();e&&e.hide()}}),apower.reviewChecker=w.registerOnce({reviewResult:void 0,init:function(){apower.productId&&"1"==apower.productType&&(this.reviewResult=w.store.get("apower_reviewed_"+apower.productId),this.reviewResult&&this.addReviewThanks())},setAsReviewed:function(){this.reviewResult=!0,w.store.set("apower_reviewed_"+apower.productId,!0),this.addReviewThanks()},isReviewed:function(e,i){var t;void 0!==this.reviewResult?e.call(i,this.reviewResult):(t={related_id:apower.productId,type:apower.productType,action:"is_review"},w.ajax({url:w.nocache("https://support.apowersoft.com/Api/review"),data:t,dataType:"jsonp",success:function(t){e.call(i,this.reviewResult=1==t.status)}.bind(this)}))},addReviewThanks:function(){w(".rating:has(.rating-count)").not(".review-win .rating").append('<span class="rating-thanks" style="display: inline">'+h("thanks_rating")+"</span>")}}),w.register("review","win",{template:function(){var t='<div class="win review-win"><div class="win-head"><h2>{@@product_reviews}</h2><div class="review-add-group"><div class="rating rating-sml" data-rating="'+(0<w('[itemprop="ratingValue"]').length?w('[itemprop="ratingValue"]').eq(0).text():w(".rating").eq(0).attr("data-rating"))+'"><div class="rating-stars"></div><div class="rating-count"><span>'+(w('[itemprop="reviewCount"]').eq(0).text()||w(".rating-count").text().select(/\d+/,0)||0)+'</span> {@@reviews}</div></div><div class="review-add" data-open-review>{@@add_your_review}</div></div></div><div class="win-body"><ul></ul></div></div>';return t},ref:{ratingEl:".rating",addEl:".review-add",listEl:".win-body > ul",ratingCountEl:".rating-count span"},page:-1,pageCount:1,paging:10,data:{},init:function(){this.callSuper("win"),this.loadEl=w('<div class="loading-more"><div></div></div>').appendTo(this.body),this.addEl.$on("click",this.onClickAdd,this),this.body.$on("click",this.onClickLike,this),this.body.$on("scroll",this.onBodyScroll,this),this.on("show",function(){-1===this.page&&this.loadPageData()},this)},onClickAdd:function(){this.hide(),w.newCom("review-form").show()},onClickLike:function(t){var e,i=w(t.target).closest(".review-like, .review-dislike"),s=i.is(".review-like"),n=i.parent().children(".review-like, .review-dislike");i.length&&(n.addClass("review-liked"),e={review_id:i.closest("[data-id]").data("id"),type:apower.productType,action:s?"approval":"oppose"},w.ajax({url:w.nocache("https://support.apowersoft.com/Api/review"),data:e,dataType:"jsonp",success:function(t){"exist"===t.status||("failed"===t.status?n.removeClass("review-liked"):i.text((Number(i.text())||0)+1))}}))},onBodyScroll:function(){var t=this.body;this.page<this.pageCount&&!this.loadEl.hasClass("active")&&t[0].scrollTop>=t[0].scrollHeight-t[0].clientHeight&&this.loadPageData()},loadPageData:function(){this.page++;var t={related_id:apower.productId,type:apower.productType,action:"get_review",start:this.page*this.paging,page_num:this.paging,language:apower.lang,nocache:"1"};this.loadEl.addClass("active"),w.ajax({url:"https://support.apowersoft.com/Api/review",data:t,dataType:"jsonp",jsonpCallback:"jQueryCallback",cache:!0,success:function(t){this.loadEl.removeClass("active"),this.pageCount=Math.ceil(t.total_count/this.paging),this.data[this.page]=t.all_review,this.onLoadData(this.data[this.page]),0<t.total_count&&this.ratingCountEl.text(t.total_count)}.bind(this)})},onLoadData:function(t,e){if(t&&t.length)for(var i='<li class="review-item" data-id="{id}"><div class="rating rating-sml" data-rating="{score}"><div class="rating-stars"></div><div class="rating-time">{add_time}</div></div><div class="review-content"><div class="review-text"><header>{title}</header><i>by {name}</i><p>{review}</p></div><div class="review-like-group"><div class="review-like">{approval_num}</div><div class="review-dislike">{oppose_num}</div></div></div></li>',s=0;s<t.length;s++){var n=t[s];"Anonymous"!==n.name&&n.name||(n.name=h("anonymous")||n.name);var o=i.format(n),a=w(o).applyCom();e?this.listEl.prepend(a):this.listEl.append(a)}},onNewReview:function(t){this.show(),t.approval_num=0,t.oppose_num=0,this.onLoadData([t],!0);var e=this.listEl.children("li:first-child");e.find(".review-like-group").remove(),e.find(".review-text").append('<div class="review-await">'+h("success_to_review")+"</div>"),e.css({background:"#99d6eb"}),e.width(),e[0].style.transition="background-color 1s linear",this.body[0].scrollTop=0,setTimeout(function(){e.css({background:"#fff"})},500)}}),w.registerDir("open-review",{selector:"[data-open-review], .rating-count",init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(){(w(".review-win").com()||w.newCom("review")).show()}}),w.registerDir("mailto",{selector:".mailto, [data-mailto]",prop:"mailto",init:function(){var t=(t=this.mailto||this.el.text()).replace(/[%#]/,"@");this.el.text(t),this.el.attr("href","mailto:"+t)}}),w.registerDir("env-href",{selector:"[android-href], [iphone-href], [mobile-href], [win-href], [mac-href]",init:function(){for(var t=this.selector.select(/\[(\w+)/g,1),e=0;e<t.length;e++){var i=t[e],s=this.el.attr(i+"-href"),n="is"+i[0].toUpperCase()+i.slice(1);if(s&&w.env[n]){this.el.attr("href",s);break}}}}),w.registerDir("env-text",{selector:"[android-text], [iphone-text], [mobile-text], [win-text], [mac-text]",init:function(){for(var t=this.selector.select(/\[(\w+)/g,1),e=0;e<t.length;e++){var i=t[e],s=this.el.attr(i+"-text")||this.el.data(i+"-text"),n="is"+i[0].toUpperCase()+i.slice(1);if(s&&w.env[n]){this.el.text(s);break}}}}),w.registerDir("right-bar",{selector:".right-bar",rates:{news:.5,share:-1,review:apower.productId&&"Order"!=apower.pageType?.5:-1,comment:-1,rocket:.5,download:.5,support:.5,weixin:0,faq:-1},visible:{},ref:{newsEl:".bar-news",rocketEl:".bar-rocket",faqEl:".bar-faq",weinxinEl:".bar-weixin",items:"> div"},els:null,init:function(){for(var t in this.els={},this.rates)this.els[t]=this.el.find(".bar-"+t);w(".comment").length&&("article"===apower.pageType?this.rates.comment=0:this.rates.comment=.5),"Order"===apower.pageType&&apower.productId&&w("[data-open-faq]").length&&(this.rates.faq=.5),"article"===apower.pageType&&(this.rates.download=0),this.initRocket(),this.initLayers(),this.initNews(),this.faqEl.$on("click",this.onClickFAQ,this)},initNews:function(){this.newsEl.$on("click",this.onClickNews,this)},onClickNews:function(){w(".download-win").com().show()},initRocket:function(){this.rocketEl.$on("click",this.onClickRocket,this),w(window).width()<768?apower.scroller.on("scroll",this.onMobileRocket,this):apower.scroller.on("scroll",this.onScroll,this)},onClickRocket:function(){w("html, body").animate({scrollTop:0},500)},onMobileRocket:function(){var t=w(".footer").length?w(".screenshots").length?w(".screenshots").offset().top:w(".footer").offset().top:0;t-w(window).height()<(w("body").scrollTop()||w("html").scrollTop())?this.rocketEl.fadeIn(200):this.rocketEl.fadeOut(200)},onScroll:function(t){var e=w(window).height();for(var i in this.rates){var s=this.rates[i],n=this.els[i],o=!(s<0||t<e*s);!!this.visible[i]!=o&&(o?n.stop().fadeIn(300):n.stop().fadeOut(300)),this.visible[i]=o}},initLayers:function(){var s,t=this;w.nextTick(function(){t.items.each(function(t,e){var i=w(e).dir("layer");i&&(i.align="l",e.style.display="block",i.gap=e.offsetWidth-this.el[0].offsetWidth+10,e.style.display="",i.on("show",function(){s&&s!==i&&s.layer.hide(),s=i}),i.on("hide",function(){s===i&&(s=null)}))}.bind(t))})},onClickFAQ:function(){var t=w("[data-open-faq]").dir("open-faq");t&&t.openFAQWithoutHash()}}),w.registerDir("baidu-search",{selector:"form.search, form.search-blank",ref:{inputEl:"[type=text]",siteEl:"[name=as_sitesearch]"},url:"https://www.baidu.com/s",init:function(){this.el.$on("submit",function(t){"zh"===apower.lang&&(t.preventDefault(),this.onBaiduSearch())},this)},onBaiduSearch:function(){var t=this.inputEl.val()+" site:"+this.siteEl.val(),e=w('<form action="{0}" target="_blank"><input type="hidden" name="wd" value="{1}"></form>'.format(this.url,t)).appendTo("body");e.submit(),e.remove()}}),w.register("online-form-menu",{selector:".online-form-menu",init:function(){this.displayInput=this.el.prev(),this.valueInput=this.el.siblings("input[type=hidden]"),this.displayInput.$on("keypress",function(t){t.preventDefault()},this),this.displayInput.$on("click",this.onClickDisplayInput,this),this.el.$on("click",this.onClickList,this)},onClickDisplayInput:function(){this.el.is(":visible")?this.closeList():this.el.stop().fadeIn(200),w("html").$on("mousedown",this.closeList,this)},closeList:function(t){t&&w(t.target).closest(this.el).length||(w("html").$off("mousedown",this.closeList,this),this.el.stop().fadeOut(200))},onClickList:function(t){var e=w(t.target).closest("li");e.siblings().removeClass("active"),e.addClass("active"),this.displayInput.val(e.text()),this.valueInput.val(e.attr("value")),this.closeList()}}),w.register("online-form","win",{template:function(){return'<div class="win online-form"><div class="win-head">{@@submit_ticket}</div><form action="" class="win-body"><label class="online-form-field"><span>{@@email}: </span><input type="email" name="email" placeholder="{@@email}" required pattern="^[\\w-]+(?:\\.[\\w-]+)*@[\\w-]+(?:\\.[\\w-]+)+$"><span class="online-form-required">*</span></label><label class="online-form-field"><span>{@@question_type}:</span><input type="text" class="online-form-select" placeholder="{@@select_problem_type}" required name="problem_tpye_text"><ul class="online-form-menu"><li value="1">{@@purchase_and_security}</li><li value="2">{@@registration_and_key_code}</li><li value="3">{@@using_the_product}</li><li value="4">{@@technical_issue}</li><li value="5">{@@refund}</li><li value="6">{@@suggestion_or_complaints}</li><li value="7">{@@business_cooperation}</li><li value="8">{@@others}</li></ul><input type="hidden" name="problem_type"><span class="online-form-required">*</span></label><label class="online-form-field"><span>{@@subject}: </span><input type="text" name="problem_subject" required placeholder="{@@subject}"><span class="online-form-required">*</span></label><label class="online-form-field"><span>{@@description}: </span><textarea name="problem_content" required></textarea><span class="online-form-required">*</span></label><label class="online-form-field online-form-attachment" style="display: none"><span class="online-form-attachment-title">{@@attachments}: </span><ul class="online-form-attachment-list"></ul></label><div class="online-form-field online-form-buttons"><button class="online-form-submit">{@@submit}</button><button class="online-form-cancel">{@@reset}</button><button class="online-form-file">{@@add_file}</button><button class="online-form-record" data-start-screen-recording="">{@@record}</button></div></form></div>'},ref:{fileEl:".online-form-file",submitEl:".online-form-submit",cancelEl:".online-form-cancel",recordEl:".online-form-record",fileWrap:".online-form-attachment",fileUl:".online-form-attachment-list",buttonCt:".online-form-buttons"},autoDestroy:!0,target:"body",baseHeight:640,init:function(){this.callSuper("win"),this.files=[],this.cancelEl.$on("click",this.onClickCancel,this),this.submitEl.$on("click",this.onClickSubmit,this),this.fileEl.$on("click",this.onClickAddFile,this),this.fileUl.$on("click",this.onClickFileUl,this),this.recordEl.$on("click",this.onClickRecord,this)},onShow:function(){this.recordEl[0].offsetTop>this.submitEl[0].offsetTop&&(this.buttonCt.addClass("online-form-buttons-align-right"),this.recordEl.after(this.fileEl))},onClickCancel:function(t){t.preventDefault(),this.body.find("input, textarea").val("")},onClickRecord:function(t){w(t.target).is("a")?t.stopPropagation():t.preventDefault()},onClickSubmit:function(t){t.preventDefault(),this.body.checkValidity()?(this.submitEl.addClass("btn-loading"),apower.uploadFiles(this.files,this.onAttachmentsUploaded.bind(this))):this.body.find("input, textarea").addClass("touched")},onAttachmentsUploaded:function(t){if(t){for(var e=this.body.formData(),i=0;i<t.length;i++){var s=t[i].name,n=t[i].url;e.append("attachments_url["+i+"][name]",s),e.append("attachments_url["+i+"][url]",n)}apower.productId&&e.append("pro_id",apower.productId);w.ajax({type:"POST",url:w.nocache("https://support.apowersoft.com/api/support?action=common-submit-ticket"),xhrFields:{withCredentials:!0},data:e,dataType:"json",processData:!1,contentType:!1,crossDomain:!0,success:function(t){t&&1==t.status?this.onSubmitted(!0,t.data):this.onSubmitted(!1,t)}.bind(this),error:function(){this.onSubmitted(!1,null)}.bind(this)})}else this.submitEl.removeClass("btn-loading")},onSubmitted:function(t){this.submitEl.removeClass("btn-loading"),this.body.find("input, textarea").removeClass("touched"),t?(this.body.find("textarea").val(""),this.files=[],this.updateAttachments(),w.msg.success(h("submit_success"))):w.msg.error(h("submit_failed"))},onClickAddFile:function(t){t.preventDefault();var e=w("#support_file_selector");e.length?e.val(""):(e=w('<input id="support_file_selector" type="file" accept="*" multiple hidden>').appendTo("body")).$on("change",function(t){for(var e=t.target.files,i=0;i<e.length;i++){var s=e[i];this.files.length<5&&(this.files.push(s),this.updateAttachments())}this.updateAttachments()},this),e[0].click()},updateAttachments:function(){if(this.fileUl.empty(),0<this.files.length){this.fileWrap.show();for(var t=0;t<this.files.length;t++)this.fileUl.append('<li>{0}<div class="online-form-attachment-close"><i></i><i></i></div></li>'.format(this.files[t].name))}else this.fileWrap.hide();var e=this.baseHeight+40*this.files.length+(this.files.length?10:0),e=Math.min(e,w(window).height());this.el[0].style.height=e+"px"},onClickFileUl:function(t){var e;w(t.target).closest(".online-form-attachment-close").length&&(e=w(t.target).closest("li").index(),this.files.splice(e,1),this.updateAttachments())}}),w.registerDir("open-online-form",{selector:"[data-open-online-form]",init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(){w.newCom("online-form").show();var t=apower.agents["online-screen-recorder"];t?t.initButton():w.loadScript(apower.getAPIDomain()+"/screen-recorder?apower=1&lang="+apower.lang)}}),w.registerDir("show-online-form",{selector:".online-form-placeholder",init:function(){var t=w.newCom("online-form",{target:null}).body;t.removeClass("win-body").addClass("online-form").addClass("online-form-placeholder").restoreScroll(),this.el.after(t),this.el.remove();var e=apower.agents["online-screen-recorder"];e?e.initButton():w.loadScript(apower.getAPIDomain()+"/screen-recorder?apower=1&lang="+apower.lang)}}),w.register("load-more",{selector:".load-more",round:1,ref:{btn:"> div",loadEl:"> div > i"},page:1,pagingCount:20,loading:!1,ended:!1,isScrollMode:!1,params:null,url:"",init:function(){var t;this.loadEl.length||(t=this.btn.text(),this.btn.empty(),this.loadEl=w('<i><svg viewBox="2 -2 20 20" width="20px" height="20px"><circle class="st0" cx="12" cy="8" r="9"/><path class="st1" d="M12,8"/><circle class="st2" cx="12" cy="8" r="5.5"/><circle class="st3 trail" cx="12" cy="8" r="9"/></svg></i>').appendTo(this.btn),this.btn.append("<span>"+t+"</span>")),this.trail=this.loadEl.find(".trail"),this.isScrollMode?this.initScrollEvents():this.btn.$on("click",this.onClickEl,this)},initScrollEvents:function(){apower.scroller.on("scroll",function(t,e){var i;"down"===e&&(i=Math.max(document.body.scrollHeight-document.body.clientHeight,document.documentElement.scrollHeight-w(document.documentElement).height()),this.el.is(":visible")&&i-30<=t&&this.loadMore())},this)},onClickEl:function(){this.loadMore()},loadMore:function(t,e){if(this.loading)return!1;t&&e&&(t=t.bind(e)),this.doRequest(t),this.loading=!0,this.play()},doRequest:function(t){var e,i=this.url;i&&(e={page:this.page,count:this.pagingCount},w.extend(e,this.params),w.ajax({type:"GET",xhrFields:{withCredentials:!1},crossDomain:!0,url:w.useParams(i,e),success:this.onLoadSuccess.bind(this,t),error:this.onLoadError.bind(this)}))},onLoadSuccess:function(t,e){var i;this.page++,e&&1==e.status?(this.loading=!1,this.stop(),i=e.data,this.onData(i),i.length<this.count&&(this.ended=!0,this.el.hide()),apower.offset.update(),t&&t(!0)):(this.onLoadError(),this.ended=!0,this.el.hide(),t&&t(!1))},onLoadError:function(){this.loading=!1,this.stop()},onData:function(){},play:function(){this.intervalId&&this.stop(),this.playedCount=0,this.intervalId=setInterval(function(){30==++this.playedCount?this.stop():this.playEach()}.bind(this),500),this.playEach()},playedCount:0,playEach:function(){this.round++,this.trail.animate({"stroke-dashoffset":300*-this.round+"%"},1e3,"linear"),this.loadEl.removeClass("paused").addClass("active")},stop:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0,this.playedCount=0),this.round=1,this.trail.stop(!0),this.trail.css("stroke-dashoffset","-300%"),this.loadEl.removeClass("active").addClass("paused")}}),w.registerDir("font-fit",{selector:"[data-font-fit]",init:function(){this.adjustFontSize(),document.fonts?document.fonts.ready.then(this.adjustFontSize.bind(this)):w.onWinLoaded(this.adjustFontSize,this)},adjustFontSize:function(){this.el.resetFontSizeToBeContained()}}),w.registerDir("text-line",{selector:"[data-text-line]",props:["text-line"],textLine:1,init:function(){this.adjustFontSize(),document.fonts?document.fonts.ready.then(this.adjustFontSize.bind(this)):w.onWinLoaded(this.adjustFontSize,this)},adjustFontSize:function(){this.el.resetFontSizeToBeLine(this.textLine)}}),w.registerDir("multiline-overflow",{selector:"[data-multiline-overflow]",originalText:"",supportsLineClamp:window.CSS&&CSS.supports("display","-webkit-box")&&CSS.supports("-webkit-line-clamp","2"),isAlreadyClamp:!1,init:function(){this.isAlreadyClamp=this.supportsLineClamp&&["-webkit-box","box"].includes(this.el.css("display")),this.originalText=this.el.text(),768<w(window).width()&&(this.addEllipsis(),w(window).$on("resize",w.blockFn(this.updateEllipsis,500),this))},addEllipsis:function(){var t=this.el[0];!this.isAlreadyClamp&&0<t.clientHeight&&t.scrollHeight>t.clientHeight+10&&this.binarySearch()},updateEllipsis:function(){this.el.text(this.originalText),this.addEllipsis()},binarySearch:function(){for(var t=this.el[0],e=this.originalText,i=0,s=e.length-4,n=-1;i<=s;){var o=(i+s)/2;this.el.text(e.slice(0,o)+"..."),t.scrollHeight===t.clientHeight?i=(n=o)+1:s=o-1}o!==n&&this.el.text(e.slice(0,n)+"...")},onDestroy:function(){w(window).$off("resize",this.updateEllipsis,this)},cancel:function(){this.el.html(this.originalText)}}),w.registerDir("copy",{selector:"[data-copy]",props:["copy"],copy:"",locked:!1,init:function(){this.copy=this.copy||this.el.text().trim(),this.el.$on("click",this.onClickEl,this)},onClickEl:function(){var t,e,i;this.locked||(t=!1,document.execCommand&&768<w(window).width()&&((e=w('<input style="position: fixed; left: 0; top: 0; z-index: -1;">').appendTo("body")).val(this.copy),e.select(),document.execCommand("copy")&&((i=w.newCom("tip",this.el,{tip:h("copied_to_clipboard"),mouseTrigger:!1})).showTip(),t=this.locked=!0,setTimeout(function(){i.hideTip(),i.destroy(),this.locked=!1}.bind(this),2e3)),e.remove()),t||this.showCopyWin())},showCopyWin:function(){var t=w.newCom("win",'<div class="win link-win"><div class="win-body">'+this.copy+"</div></div>",{autoDestroy:!0,target:"body"});t.show();var e=document.createRange();e.selectNode(t.el[0]);var i=window.getSelection();i.removeAllRanges(),i.addRange(e)}}),w.registerDir("text-roll",{selector:"[data-text-roll]",props:["text-roll","interval","trigger","scroll-duration"],textRoll:"",trigger:"",scrollDuration:1e3,interval:2e3,timeoutId:0,triggerEl:null,paused:!0,init:function(){this.trigger?"string"==typeof this.trigger?this.triggerEl=this.el.closest(this.trigger):this.triggerEl=w(this.trigger):this.triggerEl=this.el,"auto"===this.textRoll?(this.resumeScroll(),this.triggerEl.$on("mouseenter",this.pauseScroll,this),this.triggerEl.$on("mouseleave",this.resumeScroll,this)):"hover"!==this.textRoll&&""!==this.textRoll||(this.triggerEl.$on("mouseenter",this.resumeScroll,this),this.triggerEl.$on("mouseleave",this.pauseScroll,this))},pauseScroll:function(){this.paused=!0,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},resumeScroll:function(){this.paused=!1,this.timeoutId||this.startNextScroll()},startNextScroll:function(){this.timeoutId=setTimeout(this.scroll.bind(this,!0),this.interval)},scroll:function(){var t,e;this.el[0].scrollHeight<=this.el[0].clientHeight||(e=(t=this.el.children().eq(0)).outerHeight(),this.el.animate({scrollTop:e},this.scrollDuration,function(){this.el.append(t),this.el.scrollTop(0),this.paused||this.startNextScroll()}.bind(this)))}}),w.registerDir("toggle-active",{selector:"[data-toggle-active]",props:["toggle-active"],toggleActive:"",init:function(){this.targetEl=w("."+this.toggleActive),this.el.$on("mouseenter",this.onMouseEnter,this),this.el.$on("mouseleave",this.onMouseLeave,this)},onMouseEnter:function(){this.targetEl.addClass("active")},onMouseLeave:function(){this.targetEl.removeClass("active")}}),w.registerDir("scroll-to",{selector:"[data-scroll-to], [data-view]",props:["scroll-to","view"],scrollTo:"",view:"",hasSubHeader:!1,subHeaderHeight:65,init:function(){this.el.$on("click",this.onClickEl,this),this.hasSubHeader=0<w(".subheader").length},onClickEl:function(){var t,e=this.scrollTo||this.view;!e||0<(t=w("."+e)).length&&this.scrollToEl(t)},scrollToEl:function(t){var e=t.offset().top;this.hasSubHeader&&768<w(window).width()&&e>w(window).height()&&(e-=this.subHeaderHeight),w("html, body").animate({scrollTop:e})}}),w.registerDir("data-href-to",{selector:"[data-href-to]",props:["href-to"],hrefTo:"",init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(t){t.preventDefault();var e,i=this.hrefTo;!i||0<(e=w("#"+i)).length&&this.scrollToEl(e)},scrollToEl:function(t){var e=(e=t.offset().top)-Math.max(w(".header").height(),w(".subheader").height())-20;window.scrollTo(0,e)}}),w.registerDir("inview",{props:["inview"],inview:.25,selector:".main, .obj-wrap, [data-inview], [data-right-navigation]",init:function(){var t=this.el.is(".main")?0:this.inview,e=this.el.is("[data-right-navigation]"),i=!this.el.is(this.selector.replace(", [data-right-navigation]",""));apower.offset.add({el:this.el,rate:t,isNavigationEl:e,isOnlyNavigationEl:i})}}),apower.offset=w.registerOnce({offsets:[],init:function(){w(window).$on("resize",this.update,this),apower.scroller.on("scroll",w.blockFn(this.onScroll,500),this),w.defer(this.update,this)},lastNavEl:null,onScroll:function(t){for(var e=w(window).height(),i=null,s=0,n=0;n<this.offsets.length;n++){var o,a,r=this.offsets[n],l=r.el,c=r.top,h=r.bot,d=r.height,u=r.rate,p=r.isNavigationEl,f=r.isOnlyNavigationEl;d&&((a=0)<(o=Math.min(h,t+e)-Math.max(c,t))&&(a=o/Math.min(d,e)),p&&s<a&&(s=a,i=l[0]),u<a?r.inview||(r.inview=!0,f||l.addClass("inview"),l.$trigger("inview")):r.inview&&(r.inview=!1,f||l.removeClass("inview"),l.$trigger("outview")))}i!==this.lastNavEl&&(this.trigger("updatenav",i,this.lastNavEl),this.lastNavEl=i)},add:function(t){w.extend(t,{top:0,bot:0,height:0}),this.offsets.push(t)},remove:function(t){for(var e=0;e<this.offsets.length;e++)if(t===this.offsets[e].el)return this.offsets.splice(e,1),!0;return!1},update:function(){for(var t=w("html").scrollTop()||w("body").scrollTop(),e=0;e<this.offsets.length;e++){var i=this.offsets[e],s=i.el,n=s[0].getBoundingClientRect().top+t,o=s[0].offsetHeight;i.top=n,i.bot=o+n,i.height=o,i.inview=!1}this.onScroll(apower.scroller.lastScrollTop)}}),w.registerDir("open-faq",{selector:"[data-open-faq]",init:function(){this.el.$on("click",this.onClickEl,this)},onClickEl:function(t){t.preventDefault();var e=this.el.attr("href");this.openFAQByURL(e)},openFAQWithoutHash:function(){var t=this.el.attr("href");this.openFAQByURL(t.replace(/#.+/,""))},openFAQByURL:function(t){var e,i,s,n,o,a,r;t&&((e=t.select(/#.+/,0))&&(t=t.slice(0,-e.length)),(i=w.newCom("win",null,{target:"body",autoDestroy:!0,template:'<div class="win faq-win"><iframe class="win-body" style="width: 100%;" src="'+t+'"></iframe></div>'})).show(),s=this,a=o=n=!1,r=function(){n&&o&&!a&&(s.onIframeReady(i,w(i.body[0].contentDocument),i.body[0].contentWindow,e),a=!0)},w.until(10,function(){return w(i.body[0].contentDocument).find(".counted-share-vertical").length},function(){n=!0,r()}),w.until(10,function(){var t=w(i.body[0].contentDocument).find(".article");return t.length?t:null},function(t){t.onAllImageLoaded(function(){o=!0,r()})}),w(i.body[0].contentWindow).$on("load",function(){o=!0,r()}),i.showLoading())},onIframeReady:function(t,e,i,s){var n;e.find(".header, .counted-share-vertical, .rating-share-section, .posted, .leave-comment, .comment, .yarpp-related, .paging, .aside, .right-bar, .footer").remove(),e.find(".content").css("padding-top","0"),e.find(".content .wrapper").css("max-width","90%").css("padding-bottom","50px"),e.find(".main-content").css("width","auto").css("max-width","none"),t.hideLoading(),s&&((n=i.$(s)).scrollToTop(30,500),setTimeout(function(){n.animate({opacity:.1},300).animate({opacity:1},1e3)},500))}}),w.registerDir("mobile-zip",{selector:"[data-mobile-zip]",init:function(){window.innerWidth<=768&&this.zip()},zip:function(){var t=this.el.find("tr"),e=t.eq(0).find("th");t.eq(0).remove();for(var i=1;i<t.length;i++){var s=t.eq(i),n=s.find("td");n[0].rowSpan=e.length;for(var o=e.length-1;1<=o;o--){var a=w("<tr></tr>");a.append(e.eq(o).clone()),a.append(n.eq(o)),s.after(a)}}}}),w.registerDir("painting",{selector:".painting",ref:{fitEl:"[data-fit]"},init:function(){var t=this.fitEl.dir("fit");t?t.on("fit",this.adjust,this):this.adjust(),w(window).$on("resize",this.adjust,this)},adjust:function(){768<window.innerWidth&&this.el.each(function(t,e){var i=w(e);this.adjustEachPainting(i)}.bind(this))},cancelLastAdjust:function(t,e){t.css("margin-top",""),e.css("margin-top","")},adjustEachPainting:function(t){var e,i,s,n,o,a,r,l=t.closest(".wrapper"),c=t.siblings(".writing");l.length&&l.css("display").includes("flex")||!c[0]||(this.cancelLastAdjust(t,c),e=c.cssNum("margin-top")+c.find("h2").cssNum("margin-top"),i=t.cssNum("margin-top"),s=t.cssNum("margin-bottom"),n=c[0].offsetHeight-c.find("h2").cssNum("margin-top"),s<0?(r=l.innerHeight()/2-n/2,c.is("[data-skip-align]")||c.css("margin-top",r)):(o=i+t[0].offsetHeight/2,a=e+n/2,20<Math.abs(o-a)&&(a<o?(r=c.cssNum("margin-top")+o-a,c.is("[data-skip-align]")||c.css("margin-top",r)):(r=t.cssNum("margin-top")+a-o,t.is("[data-skip-align]")||t.css("margin-top",r)))))}}),w.registerOnce("[data-right-navigation]",{lastScrollDirection:"",ref:{rightEl:".right-navigation",rightBtns:".right-navigation li"},init:function(){this.rightEl=w(".right-navigation"),this.rightBtns=w(".right-navigation li"),this.subheader=w(".subheader"),this.rightBtns.$on("click",this.onClickBtn,this),apower.offset.on("updatenav",this.onUpdateNav,this);var t=this.rightEl.height()==window.innerHeight;768<window.innerWidth&&this.subheader.length&&t&&(this.rightEl.$on("mouseenter",this.onRightElMouseEnter,this),this.rightEl.$on("mouseleave",this.onRightElMouseLeave,this))},onRightElMouseEnter:function(){this.subheader.addClass("shade-by-rightnav")},onRightElMouseLeave:function(){this.subheader.removeClass("shade-by-rightnav")},onUpdateNav:function(t,e){var i,s,n,o;t?(i=this.el.indexOf(t),s=/\s*(?:-?screen|function|inview|active)\s*/g,n=t.className.replace(s,""),o=e?e.className.replace(s,""):"",this.rightBtns.removeClass("active"),this.rightBtns.eq(i).addClass("active"),this.rightEl.removeClass("data-right-"+o),this.rightEl.addClass("data-right-"+n),this.rightEl.show()):this.rightEl.hide()},onClickBtn:function(t){var e=w(t.target).closest("li").index(),i=this.el.eq(e);w.com("scroll-to").prototype.scrollToEl.call(this,i)}}),w.registerDir("object-fit",{selector:"[data-object-fit]",props:["object-fit"],objectFit:"cover",videoWidth:0,videoHeight:0,init:function(){this.objectFit=this.objectFit||"cover",this.el.$on("loadedmetadata",this.adjustVideoBox,this),w(window).$on("resize",this.adjustVideoBox,this)},onDestroy:function(){w(window).$off("resize",this.adjustVideoBox,this)},adjustVideoBox:function(){var t,e,i=this.el[0],s=i.videoWidth,n=i.videoHeight,o=i.parentNode.clientWidth,a=i.parentNode.clientHeight;s&&n&&o&&a&&"cover"===this.objectFit&&(o/a<s/n?(e=s/n*(t=a),this.el.css("left",o/2-e/2),this.el.css("width",e),this.el.css("height",t)):(this.el.css("left",""),this.el.css("width",""),this.el.css("height","")))}}),w.registerDir("download-stats",{selector:"[data-download-stats]",props:["download-stats"],downloadStats:"",init:function(){this.downloadStats||(this.downloadStats=(w("a.download, a[data-download-url]").attr("href")||"").replace(/^.+down\.php/,"https://download.apowersoft.com/stats")),this.downloadStats&&w.ajax({type:"GET",url:this.downloadStats,dataType:"json",success:this.updateDownloadCount.bind(this)})},updateDownloadCount:function(t){var e,i=t.count;0<i&&(e=((i=String(i)).length-1)%3+1,i=i.slice(0,e)+i.slice(e).replace(/\d\d\d/g,",$&"),this.el.text(i))}}),w.registerDir("bgdelay",{selector:".bgdelay",init:function(){apower.scroller.on("down",this.onScrollDown,this)},onScrollDown:function(t){this.el.offset().top-t<=w(window).height()&&this.el.removeClass("bgdelay")}})}(jQuery),function(r){r.onDomReady(function(){r.newApp({el:"body",onCreated:function(){apower.pdfapp=this}})}),r.registerOnce(".header",{ref:{nav:".nav",btns:".nav li.has-sub, .nav li.search-btn",mbtns:".nav li.has-sub .sub-title",navs:".subnav, .nav-popup",menu:".menu",subnav:".nav-popup"},isArticle:"article"===apower.pageType||"category"===apower.pageType,isAbout:"about"===apower.pageType,headerStatic:!1,mobileStyleWhenWidth:768,mobileSubArr:[],init:function(){this.headerStatic="static"===this.el.css("position"),this.headerStatic||this.el.stopScroll(),this.initScroller(),this.isArticle&&window.innerWidth>this.mobileStyleWhenWidth?this.initArticleHeader():(this.btns.$on("mouseenter",this.onEnterNavBtn,this),r.onToggleWidth(this.mobileStyleWhenWidth,function(){this.btns.$off("mouseenter",this.onEnterNavBtn,this),this.btns.$on("touchstart",this.onClickNavBtn,this),this.nav.stopScroll(),this.navs.stopScroll()},function(){},this),this.menu.$on("click",this.onClickMenu,this))},initScroller:function(){("product"!==apower.pageType||r(window).width()<=this.mobileStyleWhenWidth)&&(apower.scroller.on("up",this.onScrollUp,this),apower.scroller.on("down",this.onScrollDown,this))},onEnterNavBtn:function(t){this.lastNav&&this.lastNav.hide();var e=r(t.target).closest("li"),i=this.navs.eq(this.btns.indexOf(e));e.addClass("active"),i.stop().fadeIn(this.lastNav?0:200),i.alignTo(e,"bc",[0,0]),i.find('input[type="text"]').focus(),r.onceAllLeave([e,i],200,function(){e.removeClass("active"),i.stop().fadeOut(200),r("body").removeClass("body-fixed"),this.lastNav===i&&(this.lastNav=null)},this),this.lastNav=i},onClickNavBtn1:function(t){t.preventDefault(),this.lastNavBtn&&this.lastNavBtn.removeClass("active"),this.lastNav&&this.lastNav.hide(),this.nav.hide();var e=r(t.target).closest("li"),i=this.navs.eq(this.btns.indexOf(e));e.addClass("active"),i.show(),i.find('input[type="text"]').focus(),this.lastNavBtn=e,this.lastNav=i,r(".mobile-review").hide()},onClickNavBtn:function(t){console.log("xxxxxx"),this.initMobileSub(),console.log(r(t.target)),r.env.isMobile||(t.preventDefault(),console.log("232223")),this.lastNavBtn&&window.innerWidth>this.mobileStyleWhenWidth&&this.lastNavBtn.removeClass("active"),this.lastNav&&window.innerWidth>this.mobileStyleWhenWidth&&this.lastNav.hide(),console.log(r(t.target).index());var e=r(t.target).closest("li"),i=this.navs.eq(this.btns.indexOf(e));window.innerWidth<=this.mobileStyleWhenWidth?(e.after(i),e.hasClass("active")?(i.hide(),e.removeClass("active")):(i.show(),e.addClass("active"))):(e.siblings().removeClass("active"),e.addClass("active")),i.find('input[type="text"]').focus(),this.nav.show(),this.lastNavBtn=e,this.lastNav=i,r(".mobile-review").hide()},initMobileSub:function(){if(console.log("0000000"),0===this.mobileSubArr.length){console.log(this.subnav);for(var t=this.subnav.length,e=0;e<t;e++)this.mobileSubArr.push(r(this.subnav[e])),0==e&&r(this.mobileSubArr[e]).find("dt").remove()}},onClickMenu:function(){this.menu.hasClass("active")?(this.menu.removeClass("active"),r("body").removeClass("body-fixed"),this.nav.fadeOut(300),this.lastNavBtn&&this.lastNavBtn.removeClass("active"),this.lastNav&&this.lastNav.fadeOut(300),this.lastNavBtn=this.lastNav=null):(r("body").addClass("body-fixed"),this.nav.stop().fadeIn(300),console.log("11"),this.menu.addClass("active"),r(".mobile-review").hide())},onScrollUp:function(t){this.scrollLocked||(this.el.removeClass("slide-up"),t<=50&&(this.el.css("transition","none"),r.nextTick(function(){this.el.css("transition","")},this)))},onScrollDown:function(){this.scrollLocked||this.headerStatic||this.el.addClass("slide-up")},initArticleHeader:function(){this.initArticleWin(),this.menu.$on("click",this.onClickArticleMenu,this),this.win.find(".win-close").$on("click",this.onClickArticleMenu,this),this.btns.$on("mouseenter",this.onEnterArticleNavBtn,this),this.initArticleSearch(),window.onhashchange=this.onHashChange.bind(this),location.hash&&r(location.hash).length&&this.onScrollDown()},onHashChange:function(){this.onScrollDown(),this.scrollLocked=!0,setTimeout(function(){this.scrollLocked=!1}.bind(this),50)},initArticleWin:function(){this.el.find(".nav li").removeClass("has-sub").eq(0).addClass("active"),this.el.find(".search").show().appendTo(this.el.find(".wrapper")),this.el.find(".search-btn").remove(),this.el.find(".search").prepend('<div class="search-close"></div>'),this.el.find(".trangle").remove(),this.win=r('<div class="navwin"><div class="trangle"></div><div class="win-close"></div><div class="navwin-tabs"><div class="navwin-scroller"></div></div></div>'),this.el.after(this.win),this.win.find(".navwin-tabs").before(this.nav),this.el.find(".nav-popup").not(".search").removeClass("nav-popup").addClass("subnav");var t=this.win.find(".navwin-scroller"),e=r('<nav class="subnav store-nav"><ul><li></li></ul></nav>');e.find("li").append(this.win.find('a[href="/store/"]').clone()),t.append(this.el.find(".subnav")).append(e),this.win.stopScroll(),this.scroller=t,this.btns=this.win.find(".nav li"),this.navs=this.scroller.find("> nav"),this.btns.eq(0).addClass("active"),this.navs.eq(0).addClass("active")},onClickArticleMenu:function(){this.menu.hasClass("active")?(this.menu.removeClass("active"),this.win.fadeOut(300),r(document).$off("mousedown",this.onDomMouseDown,this),r(window).$off("resize",this.alignArticleMenu,this)):(this.menu.addClass("active"),this.win.fadeIn(300),this.alignArticleMenu(),r(document).$on("mousedown",this.onDomMouseDown,this),r(window).$on("resize",this.alignArticleMenu,this))},alignArticleMenu:function(){this.win.alignTo(this.menu,"br")},onDomMouseDown:function(t){r(t.target).closest(this.menu).length||r(t.target).closest(this.win).length||(this.win.fadeOut(300),this.menu.removeClass("active"),r(document).$off("mousedown",this.onDomMouseDown,this),r(window).$off("resize",this.alignArticleMenu,this))},onEnterArticleNavBtn:function(t){var e=r(t.target).closest("li"),i=e.index(),s=this.navs.eq(i);s.length&&(this.btns.removeClass("active"),e.addClass("active"),this.navs.removeClass("active"),s.addClass("active"))},initArticleSearch:function(){var e=this.el.find(".search"),i=e.find("input[type=submit]"),s=e.find("input[type=text]"),n=e.find(".search-close");i.$on("click",function(t){e.is(".active")&&s.val()||t.preventDefault()}),i.$on("click",function(t){e.addClass("active"),n.stop().fadeIn(300),s.focus(),s.val()?i.addClass("valid"):i.removeClass("valid")}),i.addClass("valid"),n.$on("click",function(t){e.removeClass("active"),n.stop().fadeOut(300),i.addClass("valid")})}}),apower.subheader=r.registerOnce(".subheader",{props:["fixed-screen"],fixedScreen:!1,visible:!1,whenToShow:void 0,whenToHide:1/0,init:function(){this.whenToShow=r(window).height(),this.fixedScreen||apower.scroller.on("scroll",this.onScroll,this)},onScroll:function(t){var e=t>=this.whenToShow&&t<this.whenToHide;e===this.visible||this.isMobile()||(e?this.el.stop().fadeIn(300):this.el.stop().fadeOut(300)),this.visible=e},isMobile:function(){return!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}}),"zh"===apower.lang&&r.registerOnce(function(){r.newCom("fixed-share",null,{hasWeixin:!0,init:function(){r(".share-vertical-weixin div").text("公众号"),r(".share-vertical-weixin").$on("mouseenter",this.addText,this)},addText:function(){0==r(".ap-qrcode p").length&&r(".ap-qrcode").append("<p>关注公众号<p>")}})}),r.registerOnce(".unlimited-special-offer",{expiredAfter:36e5,init:function(){this.el.appendTo("body"),this.el.find(".close").$on("click",this.onClickClose,this),r.store.get("activity_closed")||this.el.fadeIn(200)},onClickClose:function(t){t.preventDefault(),this.el.fadeOut(200),r.store.set("activity_closed",!0,this.expiredAfter)}}),r.registerDir("open-language-select",{selector:"[data-language-select]",init:function(){this.el.$on("click",function(){r.newComponent("language-win").show()},this)}});var t=-1;"zh"===apower.lang&&(t=.5),r.extend(r.getDirective("right-bar").prototype,{rates:{news:.5,share:-1,review:apower.productId&&"Order"!=apower.pageType?.5:-1,comment:-1,rocket:.5,download:.5,qq:t,support:.5,weixin:0,faq:-1},onScroll:function(t){var e=r(window).height(),i=document.body.scrollHeight;for(var s in this.rates){var n=this.rates[s],o=this.els[s],a=0<=n&&(e*n<=t||i<(1+n)*e);!!this.visible[s]!=a&&(a?o.stop().fadeIn(300):o.stop().fadeOut(300)),this.visible[s]=a}}}),r.extend(r.getComponent("language-win").prototype,{getURL:function(t){return"qs"===t?"//lightpdf.cn/":apower.getRegionPath(t)+"/"},data:[["us","en","USA","English"],["fr","fr","France","Français"],["de","de","Deutschland","Deutsch"],["it","it","Italia","Italiano"],["se","sv","Sverige","Svenska"],["nl","nl","Nederland","Nederlands"],["es","es","España","Español"],["br","pt","Brasil","Português"],["fi","fi","Suomi","Suomi"],["no","no","Norge","Norsk"],["dk","da","Danmark","Dansk"],["tr","tr","Türkiye","Türkçe"],["pl","pl","Polska","Polski"],["jp","ja","日本","日本語"],["tw","tw","中國台灣","繁體中文"],["cn","zh","中国","简体中文"],["hu","hu","Magyarországon","Magyar"],["cz","cs","Čeština","Čeština"],["gr","el","Ελλάδα","ελληνικά"],["ar","ar","العربية ","العربية "],["qs","qs","中国","轻闪PDF"]],show:function(t){var e=0<arguments.length&&void 0!==t?t:200;this.el.show(),this.el.css("display","flex"),this.alignWin(),this.el.stop().fadeIn(e),this.trigger("show",e),r.env.isMobile?r("body").addClass("body-static"):r("body").addClass("body-fixed"),r(window).on("resize",this.alignWin,this)},alignWin:function(){768<r(window).width()&&this.el.alignTo(document.body,"c")}}),r.extend(r.getDirective("bind-share").prototype,{links:{google:{url:"https://plus.google.com/share?url={url}&t={title}",width:500,height:500},facebook:{url:"http://www.facebook.com/sharer/sharer.php?u={url}&title={title}",width:673,height:374},twitter:{url:"https://twitter.com/intent/tweet?url={url}&text={title}",width:548,height:430},pinterest:{url:"//assets.pinterest.com/js/pinmarklet.js",append:!0,width:600,height:400},hatena:{url:"http://b.hatena.ne.jp/entry/panel/?url={url}&btitle={title}",width:365,height:220},linkedin:{url:"https://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}",width:600,height:600},weixin:{img:"https://cdncss.aoscdn.com/local/lightpdf.com/img/wx.png"},douban:{url:"http://www.douban.com/share/service?href={url}&name={title}&text={text}"},qzone:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&desc={text}&summary=&site="},weibo:{url:"http://service.weibo.com/share/share.php?url={url}&title={title}&searchPic=true"},tencent:{url:"http://share.v.t.qq.com/index.php?c=share&a=index&url={url}&title={title}"},youdao:{url:"http://note.youdao.com/memory/?url={url}&title={title}"}},getShareLink:function(t,e,i,s){var n=this.links[t].url||this.links[t].img;"weixin"===t&&0!==n.indexOf("http")&&(n=apower.getDomain("zh")+n);var o={url:encodeURIComponent(e),title:encodeURIComponent(i),text:encodeURIComponent(s)};return n=n.format(o)}}),r.registerOnce(".chrome-app",{ref:{cancel:".btn-cancel",install:".btn-install"},init:function(){r.env.isChrome&&!localStorage.getItem("install-pdf-plug")&&this.el.show(),this.cancel.$on("click",this.onClickCancel,this),this.install.$on("click",this.onClickInstall,this)},onClickCancel:function(){this.el.fadeOut(300)},onClickInstall:function(){var t;localStorage.setItem("install-pdf-plug",!0),this.el.fadeOut(300),t="cs"==apower.lang?"https://chrome.google.com/webstore/detail/lightpdf-%E2%80%93-pdf-converter/mdakmhabcljcmknopcnmkccbbjppikci?hl=cz":"el"==apower.lang?"https://chrome.google.com/webstore/detail/lightpdf-%E2%80%93-pdf-converter/mdakmhabcljcmknopcnmkccbbjppikci?hl=gr":"zh"==apower.lang?"https://chrome.google.com/webstore/detail/lightpdf-%E2%80%93-pdf-converter/mdakmhabcljcmknopcnmkccbbjppikci?hl=zh-cn":"https://chrome.google.com/webstore/detail/lightpdf-%E2%80%93-pdf-converter/mdakmhabcljcmknopcnmkccbbjppikci?hl="+apower.lang,window.open(t,"_blank")}}),r.registerOnce(".education",{ref:{close:".close"},init:function(){this.close.$on("click",this.onClickClose,this)},onClickClose:function(){this.el.fadeOut(300)}}),r.registerOnce("#api-key",{init:function(){console.log("#api-key"),this.el.$on("click",this.onGetApiKey,this)},onGetApiKey:function(){console.log("onGetApiKey"),apower.user.isLogined()?this.goFormPage():(console.log("not login--"),r.newComponent("login").show())},goFormPage:function(){var t=apower.getRegionPath(apower.lang)+"/person-info-form";console.log("form-page url",t),window.location=t}})}(jQuery);